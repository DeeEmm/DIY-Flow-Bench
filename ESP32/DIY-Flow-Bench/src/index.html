<!DOCTYPE HTML>
<html lang="en">
	<HEAD>
      <title>DIY Flow Bench</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" type="text/css" href="/style.css">
	</HEAD>
	<BODY>

    <input type="hidden" id="ACTIVE_ORIFICE" value=""></input>
    <input type="hidden" id="BENCH_TYPE" value=""></input>
    
    <!-- Save Data Modal -->
    <div id="captureLiftDataModal" class="modal">
      <div class="modal-content">
        <span class="closeCaptureLiftDataModalButton">&times;</span>
        <h3>~LANG_GUI_SELECT_LIFT_VAL_BEFORE_CAPTURE~</h3>
        <hr>
        <div class="align-center">
          <form method="POST" action="/api/saveliftdata" enctype="multipart/form-data">
            <label>~LANG_GUI_LIFT_VALUE~</label>
            <br>
              <div class="switch-field">
                <input type="radio" id="lift-one" name="lift-data" value="1"/>
                <label for="lift-one">~lift1~</label>
                <input type="radio" id="lift-two" name="lift-data" value="2" />
                <label for="lift-two">~lift2~</label>
                <input type="radio" id="lift-three" name="lift-data" value="3"/>
                <label for="lift-three">~lift3~</label>
                <input type="radio" id="lift-four" name="lift-data" value="4" />
                <label for="lift-four">~lift4~</label>
                <input type="radio" id="lift-five" name="lift-data" value="5" />
                <label for="lift-five">~lift5~</label>
                <input type="radio" id="lift-six" name="lift-data" value="6" />
                <label for="lift-six">~lift6~</label>
                <input type="radio" id="lift-seven" name="lift-data" value="7" />
                <label for="lift-seven">~lift7~</label>
                <input type="radio" id="lift-eight" name="lift-data" value="8" />
                <label for="lift-eight">~lift8~</label>
                <input type="radio" id="lift-nine" name="lift-data" value="9" />
                <label for="lift-nine">~lift9~</label>
                <input type="radio" id="lift-ten" name="lift-data" value="10" />
                <label for="lift-ten">~lift10~</label>
                <input type="radio" id="lift-eleven" name="lift-data" value="11" />
                <label for="lift-eleven">~lift11~</label>
                <input type="radio" id="lift-twelve" name="lift-data" value="12" />
                <label for="lift-twelve">~lift12~</label>
              </div>
            <input class="button submit-button" type="submit" id="capture-lift-data-button" value="~LANG_GUI_LIFT_CAPTURE~"/>
          </form>
        </div>
        <div class="clear-both">&nbsp;</div>
      </div>        
    </div>

    <!--Update modal-->
    <div id="updateModal" class="modal">
      <div class="modal-content updateModal">
        <span class="closeUpdateModalButton">&times;</span>
        <div class="align-center">
          <h3>~LANG_GUI_UPLOAD_FIRMWARE_BINARY~</h3>
          <hr>
          <br>
          <form method='POST' action='/api/update' enctype='multipart/form-data'>
            <div class="input_container">
              <input type="file" name="update" id="fileUpload">
              <input type='submit' value='~LANG_GUI_FIRMWARE_UPDATE~' class="button file-submit-button">
            </div>
          </form>
        </div>
      </div>        
    </div>

    <!--Flow Target modal-->
    <div id="flowTargetModal" class="modal">
      <div class="modal-content flowTargetModal">
        <span class="closeFlowTargetModalButton">&times;</span>
        <div class="align-center">
          <form method="POST" action="/api/saveflowtarget" enctype="multipart/form-data">
            <label>~LANG_GUI_USER_FLOW_TARGET_VALUE~</label>
              <input id="flowTargetValInput" type="text" name="USER_OFFSET" value="~USER_OFFSET~"/>
              <input class="button submit-button" type="submit" value="~LANG_GUI_USER_FLOW_TARGET_SAVE~"/>
            </form>
        </div>
      </div>        
    </div>

    <!--Calibration modal-->
    <div id="calibrationModal" class="modal">
      <div class="modal-content calibrationModal">
        <span class="closeCalibrationModalButton">&times;</span>
        <div class="align-center">
          <button id="calibrate-button" class="button">~LANG_GUI_CAL_FLOW_OFFSET~</button>
          <button id="leak-cal-button" class="button">~LANG_GUI_CAL_LEAK_TEST~</button>
        </div>
      </div>        
    </div>

    <!-- Load Data Modal -->
    <div id="loadGraphDataModal" class="modal">
      <div class="modal-content">
        <span class="closeLoadGraphDataModalButton">&times;</span>
        <h3>~LANG_GUI_LOAD_LIFT_PROFILE~</h3>
        <hr>
        <br>
        <div class="float-right">
          <form method="POST" action="/api/viewdata" enctype="multipart/form-data">
            <input class="button file-submit-button" type="submit" value="~LANG_GUI_LOAD_LIFT_PROFILE_LOAD~"/>
          </form>
        </div>
        <div class="clear-both">&nbsp;</div>
      </div>        
    </div>


    <!-- Save Data Modal -->
    <div id="saveGraphDataModal" class="modal">
      <div class="modal-content">
        <span class="closeSaveGraphDataModalButton">&times;</span>
        <h3>~LANG_GUI_SAVE_LIFT_DATA~</h3>
        <hr>
        <br>
        <div class="float-right">
          <form method="POST" action="/api/savedata" enctype="multipart/form-data">
            <label class="config-label">~LANG_GUI_SAVE_GRAPH_FILENAME~:</label>&nbsp;<input type="text" value="~FileName~">
            <input class="button file-submit-button" type="submit" value="Load"/>
          </form>
        </div>
        <div class="clear-both">&nbsp;</div>
      </div>        
    </div>



    <!-- File Manager Modal -->
    <div id="fileModal" class="modal">
      <div class="modal-content">
        <span class="closeFileModalButton">&times;</span>
        <h3>~LANG_GUI_FILE_MANAGER~</h3>
        <div id="file_list">~FILE_LIST~</div>
        <br>
        <hr>
        <br>
        <div class="float-right">
          <form method="POST" action="/api/file/upload" enctype="multipart/form-data">
            <div class="input_container">
              <input type="file" name="upload" id="fileUpload">
              <input type='submit' value='~LANG_GUI_FILEMANAGER_UPLOAD~' class="button file-submit-button">
            </div>
          </form>
        </div>
        <div class="clear-both">&nbsp;</div>
      </div>        
    </div>

    <!-- Info Modal -->
    <div id="infoModal" class="modal">
      <div class="info-modal-content row">
        <span class="closeInfoModalButton">&times;</span>
        <div class="row info-modal">
            <div class="column">
            <h4>~LANG_GUI_FIRMWARE~</h4>
            <hr>
            <div class="config-row"><label class="config-label">~LANG_GUI_VERSION~: </label><span class="config-value" id="RELEASE">~RELEASE~</span></div>
            <div class="config-row"><label class="config-label">~LANG_GUI_BUILD~:  </label><span class="config-value" id="BUILD_NUMBER">~BUILD_NUMBER~</span></div>
            <div class="config-row"><label class="config-label">~LANG_GUI_GUI~: </label><span class="config-value" id="VERSION">@@version@@</span></div>
            <h4>~LANG_GUI_STORAGE~</h4>
            <hr>
            <div class="config-row"><label class="config-label">~LANG_GUI_MEM_SIZE~:  </label><span class="config-value" id="SPIFFS_MEM_SIZE">~SPIFFS_MEM_SIZE~</span> (bytes)</div>
            <div class="config-row"><label class="config-label">~LANG_GUI_MEM_USED~:  </label><span class="config-value" id="SPIFFS_MEM_USED">~SPIFFS_MEM_USED~</span> (bytes)</div>
            <h4>~LANG_GUI_NETWORK~</h4>
            <hr>
            <div class="config-row"><label class="config-label">~LANG_GUI_IP_ADDRESS~:  </label><span class="config-value" id="LOCAL_IP_ADDRESS">~LOCAL_IP_ADDRESS~</span></div>
            <div class="config-row"><label class="config-label">~LANG_GUI_HOSTNAME~:  </label><span class="config-value" id="HOSTNAME">http://~HOSTNAME~.local</span></div>
          </div>
          <div class="column">
            <!-- <div class="config-row"><label class="config-label">Uptime:  </label><span class="config-value" id="UPTIME">~UPTIME~</span></div> -->
            <h4>~LANG_GUI_HARDWARE_CONFIG~</h4>
            <hr>
            <div class="config-row"><label class="config-label">~LANG_GUI_BENCH_TYPE~:  </label><span class="config-value" id="BENCH_TYPE">~BENCH_TYPE~</span></div>
            <div class="config-row"><label class="config-label">~LANG_GUI_BOARD_TYPE~:  </label><span class="config-value" id="BOARD_TYPE">~BOARD_TYPE~</span></div>
            <!-- <div class="config-row"><label class="config-label">Boot Time:  </label><span class="config-value" id="BOOT_TIME">~BOOT_TIME~</span></div> -->
            <h4>~LANG_GUI_SENSOR_CONFIG~</h4>
            <hr>
            <div class="config-row"><label class="config-label">~LANG_GUI_MAF_DATA_FILE~:  </label><span class="config-value" id="MAF_SENSOR">~MAF_SENSOR~</span></div>
            <div class="config-row"><label class="config-label">~LANG_GUI_REF_PRESSURE_SENSOR~:  </label><span class="config-value" id="PREF_SENSOR">~PREF_SENSOR~</span></div>
            <div class="config-row"><label class="config-label">~LANG_GUI_TEMP_SENSOR~:  </label><span class="config-value" id="TEMP_SENSOR">~TEMP_SENSOR~</span></div>
            <div class="config-row"><label class="config-label">~LANG_GUI_HUMIDITY_SENSOR~:  </label><span class="config-value" id="RELH_SENSOR">~RELH_SENSOR~</span></div>
            <div class="config-row"><label class="config-label">~LANG_GUI_BARO_SENSOR~:  </label><span class="config-value" id="BARO_SENSOR">~BARO_SENSOR~</span></div>
            <div class="config-row"><label class="config-label">~LANG_GUI_PITOT_SENSOR~:  </label><span class="config-value" id="PITOT_SENSOR">~PITOT_SENSOR~</span></div>
            <div class="config-row"><label class="config-label">~LANG_GUI_DIFFERENTIAL_SENSOR~:  </label><span class="config-value" id="PDIFF_SENSOR">~PDIFF_SENSOR~</span></div>
            </div>
          </div>
      </div>        
    </div>
      


    <!-- main page code -->
    <div class="headerbar">
        <h1><a href="/" id="PAGE_TITLE" alt="DIY Flow Bench">DIY Flow Bench</a></h1>
    </div>

    <!-- Navbar-->
    <button class="tablink" onclick="openTab('dashboard', this)" id="load-dashboard-button">~LANG_GUI_DASHBOARD~</button>
    <button class="tablink" onclick="openTab('datalog', this)" id="load-datalog-button">~LANG_GUI_DATA~</button>
    <button class="tablink" onclick="openTab('configuration', this)" id="load-config-button">~LANG_GUI_CONFIG~</button>

    <div id="tabcontainer">
    <!-- Main Tab-->
    <div id="dashboard" class="tabcontent tabcontentMain">        
      <div class="content">
        <div class="tile-grid">
          <div class="tile tile-pref" id="tile-pref">
            <p class="tile-title" id="tile-pref-title">~LANG_GUI_PREF~</p>
            <p><span class="tile-value" id="PREF">&nbsp;</span></p>
            <p class="units">inH2O</p>
          </div>
          <div class="tile tile-pdiff" id="tile-pdiff">
            <p class="tile-title" id="tile-pdiff-title">~LANG_GUI_PDIFF~</p>
            <p><span class="differential-tile-value" id="PDIFF">&nbsp;</span></p>
            <p class="units">inH2O</p>
          </div>
          <div class="tile tile-flow" id="flow-tile">
            <p class="tile-title" id="flow-tile-title">~LANG_GUI_FLOW~</p>
            <p><span class="tile-value" id="FLOW">&nbsp;</span></p>
            <p class="units">ACFM</p>
          </div>
          <div class="tile tile-aflow" id="aflow-tile">
            <p class="tile-title" id="aflow-tile-title">~LANG_GUI_AFLOW~</p>
            <p><span class="tile-value" id="AFLOW">&nbsp;</span></p>
            <p class="units">~AFLOW_UNITS~&nbsp;&commat;&nbsp;<span id="PADJUST">28</span>&nbsp;inH2O</p>
          </div>
          <div class="tile tile-sflow" id="sflow-tile">
            <p class="tile-title" id="sflow-tile-title">~LANG_GUI_SFLOW~</p>
            <p><span class="tile-value" id="SFLOW">&nbsp;</span></p>
            <p class="units">SCFM:&nbsp;<span id="STD_REF">~STD_REF~</span></p>
          </div>
          <div class="tile tile-flow" id="maf-tile">
            <p class="tile-title" id="maf-tile-title">~LANG_GUI_MFLOW~</p>
            <p><span class="tile-value" id="MFLOW">&nbsp;</span></p>
            <p class="units">KGH</p>
          </div>
          <div class="tile tile-pitot" id="tile-pitot">
            <p class="tile-title" id="tile-pitot-title">~LANG_GUI_PITOT~</p>
            <p><span class="pitot-tile-value" id="PITOT">&nbsp;</span></p>
            <p class="units">m/sec &Delta; <span id="PITOT_DELTA">~PITOT_DELTA~</span>&nbsp;inH2O</p>
          </div>
          <div class="tile tile-swirl" id="tile-swirl">
            <p class="tile-title" id="tile-swirl-title">~LANG_GUI_SWIRL~</p>
            <p><span class="tile-value" id="SWIRL">&nbsp;</span></p>
            <p class="units">rpm</p>
          </div>
          <div class="tile tile-fdiff" id="tile-fdiff">
            <p class="tile-title"  id="tile-fdiff-title">~LANG_GUI_FLOW_DIFF~</p>
            <p><span class="tile-value flowTargetVal" id="FDIFF">&nbsp;</span></p>
            <p class="units"><span id="FDIFFTYPEDESC">~FDIFFTYPEDESC~</span></p>
          </div>
          <div class="tile tile-temp" id="tile-temp">
            <p class="tile-title" id="tile-temp-title">~LANG_GUI_TEMP~</p>
            <p><span class="tile-value" id="TEMP">&nbsp;</span></p>
            <p class="units">~TEMP_UNIT~</p>
          </div>
          <div class="tile tile-baro" id="tile-baro">
            <p class="tile-title" id="tile-baro-title">~LANG_GUI_BARO~</p>
            <p><span class="tile-value" id="BARO">&nbsp;</span></p>
            <p class="units">millibar (hPa)</p>
          </div>
          <div class="tile tile-relh" id="tile-relh">
            <p class="tile-title"id="tile-relh-title">~LANG_GUI_HUMIDITY~</p>
            <p><span class="tile-value" id="RELH">&nbsp;</span></p>
            <p class="units">&percnt;RelH</p>
          </div>
        </div>  
      </div>          
      <div class="align-center">
        <div class="status_message"><span id="STATUS_MESSAGE">~STATUS_MESSAGE~</span></div>                        
        <div class="hidden_div">
          <br>Ref Pressure mV: <span id="PREF_MV">&nbsp;</span>
          <br>MAF mV: <span id="MAF_MV">&nbsp;</span>
          <br>Pitot mV: <span id="PITOT_MV">&nbsp;</span>
        </div>   
        
        <form method="POST" id="orificeRadio" style="display: none;">
          <div class="switch-field">
            <input type="radio" id="orifice1" name="radioOrifice" value="1" ~ORIFICE1_CHECKED~ onchange="orificeChange(this);"/>
            <label for="orifice1">1</label>
            <input type="radio" id="orifice2" name="radioOrifice" value="2" ~ORIFICE2_CHECKED~ onchange="orificeChange(this);"/>
            <label for="orifice2">2</label>
            <input type="radio" id="orifice3" name="radioOrifice" value="3" ~ORIFICE3_CHECKED~ onchange="orificeChange(this);"/>
            <label for="orifice3">3</label>
            <input type="radio" id="orifice4" name="radioOrifice" value="4" ~ORIFICE4_CHECKED~ onchange="orificeChange(this);"/>
            <label for="orifice4">4</label>
            <input type="radio" id="orifice5" name="radioOrifice" value="5" ~ORIFICE5_CHECKED~ onchange="orificeChange(this);"/>
            <label for="orifice5">5</label>
            <input type="radio" id="orifice6" name="radioOrifice" value="6" ~ORIFICE6_CHECKED~ onchange="orificeChange(this);"/>
            <label for="orifice6">6</label>
          </div>
          <div id="orifice-data">Calibrated Flow Rate: <span id="ORIFICE_MAX_FLOW">~ORIFICE_MAX_FLOW~</span>cfm @ <span id="ORIFICE_CALIBRATED_DEPRESSION">~ORIFICE_CALIBRATED_DEPRESSION~</span> inH2O"</div>
        </form>
          
        <button id="on-button" class="control-button">~LANG_GUI_START~</button>
        <button id="off-button" class="control-button">~LANG_GUI_STOP~</button>
        <button id="clear-message-button" class="control-button">~LANG_GUI_CLEAR_ALARM~</button>
        <br>
        <button id="show-capture-modal-button" class="control-button">~LANG_GUI_CAPTURE~</button>


      </div>
                
    </div>

    
    <!-- Datalog tab -->
    <div id="datalog" class="tabcontent tabcontentData">

        <!-- lift graph -->
        <!-- NOTE: Inline styling is required for SVG Download-->
        <div class="graph-container">        
          <svg class="graph" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" id="dataGraph" style="background-color: #fff; padding-top: 100px;">
          
            <!--Grid-->
            <g class="grid x-grid" id="xGrid" style="stroke: grey; stroke-dasharray: 1 2; stroke-width: 1;">
              <line x1="100" x2="100" y1="0" y2="510"></line>
              <line x1="150" x2="150" y1="0" y2="510"></line>
              <line x1="200" x2="200" y1="0" y2="510"></line>
              <line x1="250" x2="250" y1="0" y2="510"></line>
              <line x1="300" x2="300" y1="0" y2="510"></line>
              <line x1="350" x2="350" y1="0" y2="510"></line>
              <line x1="400" x2="400" y1="0" y2="510"></line>
              <line x1="450" x2="450" y1="0" y2="510"></line>
              <line x1="500" x2="500" y1="0" y2="510"></line>
              <line x1="550" x2="550" y1="0" y2="510"></line>
              <line x1="600" x2="600" y1="0" y2="510"></line>
              <line x1="650" x2="650" y1="0" y2="510"></line>
              <line x1="700" x2="700" y1="0" y2="510"></line>
            </g>

            <g class="grid y-grid" id="yGrid" style="stroke: grey; stroke-dasharray: 1 2; stroke-width: 1;">
              <line x1="90" x2="700" y1="0" y2="0"></line>
              <line x1="90" x2="700" y1="50" y2="50"></line>
              <line x1="90" x2="700" y1="100" y2="100"></line>
              <line x1="90" x2="700" y1="150" y2="150"></line>
              <line x1="90" x2="700" y1="200" y2="200"></line>
              <line x1="90" x2="700" y1="250" y2="250"></line>
              <line x1="90" x2="700" y1="300" y2="300"></line>
              <line x1="90" x2="700" y1="350" y2="350"></line>
              <line x1="90" x2="700" y1="400" y2="400"></line>
              <line x1="90" x2="700" y1="450" y2="450"></line>
              <line x1="90" x2="700" y1="500" y2="500"></line>
            </g>

            <!--Grid Labels-->
            <g class="labels x-labels">
              <text x="100" y="550">Lift:</text>
              <text x="150" y="550">~lift1~</text>
              <text x="200" y="550">~lift2~</text>
              <text x="250" y="550">~lift3~</text>
              <text x="300" y="550">~lift4~</text>
              <text x="350" y="550">~lift5~</text>
              <text x="400" y="550">~lift6~</text>
              <text x="450" y="550">~lift7~</text>
              <text x="500" y="550">~lift8~</text>
              <text x="550" y="550">~lift9~</text>
              <text x="600" y="550">~lift10~</text>
              <text x="650" y="550">~lift11~</text>
              <text x="700" y="550">~lift12~</text>
          </g>
          
          <g class="labels y-labels">
            <text x="80" y="10">~flow10~</text>
            <text x="80" y="60">~flow9~</text>
            <text x="80" y="110">~flow8~</text>
            <text x="80" y="160">~flow7~</text>
            <text x="80" y="210">~flow6~</text>
            <text x="80" y="260">~flow5~</text>
            <text x="80" y="310">~flow4~</text>
            <text x="80" y="360">~flow3~</text>
            <text x="80" y="410">~flow2~</text>
            <text x="80" y="460">~flow1~</text>
            <text x="80" y="510">Flow (cfm)</text>
          </g>

            <!--Graph Key-->
            <g class="labels key-labels">
              <!--
              <text x="625" y="25" id="default-key-text">Current Data</text>
              <line x1="550" y1="20" x2="620" y2="20"  id="default-key" style="stroke:#000;stroke-width:1;stroke-dasharray:4,1;opacity:0.5;" /> 
              
              <line x1="550" y1="35" x2="620" y2="35"  style="stroke:#f50808;stroke-width:2;opacity:0.5;" /> 
              <text x="625" y="40">Exhaust</text>
              -->
            </g>

            <!--Data Points - css classes to display value on hover - NOTE text value is displayed above dataPoint-->
            <!--
            <g class="first_set points" data-setname="Our first data set" id="dataPlot">
              <circle class="dataCircle" cx="150" cy="340" data-value="7.2" r="4"></circle><text class="dataValue hide" x="150" y="310">7.2</text>
              <circle class="dataCircle" cx="200" cy="315" data-value="8.1" r="4"></circle><text class="dataValue hide" x="200" y="285">4.2</text>
              <circle class="dataCircle" cx="250" cy="301" data-value="7.7" r="4"></circle><text class="dataValue hide" x="250" y="271">5.2</text> 
              <circle class="dataCircle" cx="300" cy="280" data-value="6.8" r="4"></circle><text class="dataValue hide" x="300" y="270">23.2</text>
              <circle class="dataCircle" cx="350" cy="249" data-value="6.7" r="4"></circle><text class="dataValue hide" x="350" y="239">32</text>  
              <circle class="dataCircle" cx="400" cy="245" data-value="5.7" r="4"></circle><text class="dataValue hide" x="400" y="235">7.2</text> 
              <circle class="dataCircle" cx="450" cy="242" data-value="6.7" r="4"></circle><text class="dataValue hide" x="450" y="232">8.2</text> 
              <circle class="dataCircle" cx="500" cy="238" data-value="6.8" r="4"></circle><text class="dataValue hide" x="500" y="228">752</text> 
              <circle class="dataCircle" cx="550" cy="230" data-value="4.7" r="4"></circle><text class="dataValue hide" x="550" y="220">22</text>  
              <circle class="dataCircle" cx="600" cy="222" data-value="5.7" r="4"></circle><text class="dataValue hide" x="600" y="212">7</text>   
              <circle class="dataCircle" cx="650" cy="220" data-value="2.7" r="4"></circle><text class="dataValue hide" x="650" y="210">7542</text>
              <circle class="dataCircle" cx="700" cy="218" data-value="6.9" r="4"></circle><text class="dataValue hide" x="700" y="208">42</text>  
            </g>
            -->

            <!--Hard coded Graph Line Data-->
            <g class="surfaces" id="lineData">
                <!--Line data-->
                <polyline fill="none" stroke="#000" stroke-width="1" stroke-dasharray="4, 1"
                points="100,500 150,~LINE_DATA1~ 200,~LINE_DATA2~ 250,~LINE_DATA3~ 300,~LINE_DATA4~ 350,~LINE_DATA5~ 400,~LINE_DATA6~ 450,~LINE_DATA7~ 500,~LINE_DATA8~ 550,~LINE_DATA9~ 600,~LINE_DATA10~ 650,~LINE_DATA11~ 700,~LINE_DATA12~"/>

            </g>
            
            <use class="grid double" xlink:href="#xGrid" ></use>
            <use class="grid double" xlink:href="#yGrid" ></use>
            
          </svg>


          <!-- ARRAY TO SVG - Appends data to graph container -->

          <!-- <coords-svg stroke="gold" stroke-dasharray="4, 1" coords="[[100,330],[ 150,332],[ 200,332],[ 250,335],[ 300,275],[ 350,281],[ 400,250],[ 450,241],[ 500,251],[ 550,133],[ 600,199],[ 650,172],[ 700,177]]"></coords-svg> -->
          <!-- <coords-svg stroke="green" coords="[[2, 15],[57, 58],[5, 57]]"></coords-svg> -->

          <!-- Converts custom <coord-svg> elements into valid polyline and appends to dataPlot. Next stage is to use JSON -->
          <!-- <script>
            customElements.define("coords-svg", class extends HTMLElement{
              connectedCallback(){
                let arr = JSON.parse(this.getAttribute("coords"));
                let dPath = arr.flat().join(" ");
                let stroke = this.getAttribute("stroke");
                this.style.display = "inline-block";
                
                var svgNS = "http://www.w3.org/2000/svg";
                let polyline = document.createElementNS(svgNS, "polyline");
                polyline.classList.add("dataLine");

                polyline.setAttribute("points", dPath);
                polyline.setAttribute("stroke", stroke);
                polyline.setAttribute("stroke-width", 1);
                polyline.setAttribute("fill", "none");

                document.getElementById("dataPlot").appendChild(polyline);
              }
            });
          </script> -->
         
          <!-- ARRAY TO SVG -->

        </div>  
    
        <!-- end lift graph -->


        <div class="align-center">
          <br>
          <button id="clear-graph-data-button" class="control-button">~LANG_GUI_CLEAR~</button> 
          <button id="export-graph-data-button" class="control-button">~LANG_GUI_EXPORT~</button> 
          <button id="capture-graph-data-button" class="control-button">~LANG_GUI_IMAGE~</button> 
          <!-- Export button fires javascript function to click link below forcing the download-->
          <a href="/api/file/download/liftdata.json" download id="file-data-download" hidden></a>
        </div>

    </div>

    <!-- configuration tab -->
    <div id="configuration" class="tabcontent tabcontentConfig">
      <div class="config-panel">
        <p style="text-align:center"><button id="file-manager-button" class="button">Files</button> <button id="info-button" class="button">Info</button> <button id="support-button" class="button" onclick="window.open('https://github.com/DeeEmm/DIY-Flow-Bench/wiki','_blank')">Support</button> <button id="restart-button" class="button" >Reboot</button> <button id="update-button" class="button">Update</button></p>       
        <br>
        <form method="POST" action="/api/saveconfig">
          <h2>~LANG_GUI_SYS_SETTINGS~</h2>
          <h3>~LANG_GUI_WIFI_INFO~</h3>        
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_WIFI_SSID~:</label>&nbsp;<input type="text" id="CONF_WIFI_SSID"  name="CONF_WIFI_SSID" value="~CONF_WIFI_SSID~" class="config-text" ><span class="tooltiptext">The name of your WiFi network</span></div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_WIFI_PASS~:</label>&nbsp;<input type="text" id="CONF_WIFI_PSWD" name="CONF_WIFI_PSWD" value="~CONF_WIFI_PSWD~" class="config-text"><span class="tooltiptext">Your WiFi Password</span></div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_WIFI_AP_SSID~:</label>&nbsp;<input type="text" id="CONF_WIFI_AP_SSID" name="CONF_WIFI_AP_SSID" value="~CONF_WIFI_AP_SSID~" class="config-text" ><span class="tooltiptext">Access-Point name for direct WiFi connection</span></div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_WIFI_AP_PASS~:</label>&nbsp;<input type="text" id="CONF_WIFI_AP_PSWD" name="CONF_WIFI_AP_PSWD" value="~CONF_WIFI_AP_PSWD~" class="config-text"><span class="tooltiptext">Access-Point password</span></div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_HOSTNAME~:</label>&nbsp;<input type="text" id="CONF_HOSTNAME" name="CONF_HOSTNAME" value="~CONF_HOSTNAME~" class="config-text"><span class="tooltiptext">DNS Hostname (used for connecting via URL e.g. http://diyfb.local)</span></div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_WIFI_TIMEOUT~:</label>&nbsp;<input type="text" id="CONF_WIFI_TIMEOUT" name="CONF_WIFI_TIMEOUT" value="~CONF_WIFI_TIMEOUT~" class="config-text"><span class="tooltiptext">Number of milliseconds before WiFi retries connection</span></div>
          <br>
          <h3>~LANG_GUI_GENERAL_SETTINGS~</h3>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_BENCH_TYPE~:</label><span>~BENCH_TYPE_DROPDOWN~</span><span class="tooltiptext">Select bench type</span></div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_MAF_HOUSING_DIAMETER~:</label>&nbsp;<input type="text" id="CONF_MAF_HOUSING_DIAMETER" name="CONF_MAF_HOUSING_DIAMETER" value="~CONF_MAF_HOUSING_DIAMETER~" class="config-text"><span class="tooltiptext">Diameter of MAF Housing. (Leave as zero to use standard housing diameter)</span></div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_REFRESH_RATE~:</label>&nbsp;<input type="text" id="CONF_REFRESH_RATE" name="CONF_REFRESH_RATE" value="~CONF_REFRESH_RATE~" class="config-text"><span class="tooltiptext">Screen refresh rate in milliseconds</span></div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_TEMPERATURE_UNIT~:</label><span>~TEMPERATURE_DROPDOWN~</span><span class="tooltiptext">Display unit of temperature</span></div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_VALVE_LIFT_INTERVAL~:</label>&nbsp;<input type="text" id="VALVE_LIFT_INTERVAL" name="VALVE_LIFT_INTERVAL" value="~VALVE_LIFT_INTERVAL~" class="config-text"><span class="tooltiptext">Distance between valve lift data points</span></div>
          <br>
          <h3>~LANG_GUI_RESOLUTION_AND_ACCURACY~</h3>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_GEN_DECIMAL_ACCURACY~:</label>
            <span>~GEN_DECIMAL_LENGTH_DROPDOWN~</span>
            <span class="tooltiptext">Number of decimal places used in UI</span>
          </div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_FLOW_DECIMAL_ROUNDING~:</label>
            <span>~FLOW_DECIMAL_LENGTH_DROPDOWN~</span>
            <span class="tooltiptext">Number of decimal places used in UI for flow values</span>
          </div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_FLOW_VALUE_ROUNDING~:</label>
            <span>~ROUNDING_TYPE_DROPDOWN~</span>
            <span class="tooltiptext">Rounding used in flow calculations</span>
          </div>
          <br>
          <h3>~LANG_GUI_DATA_FILTERS~</h3>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_DATA_FILTER_TYPE~:</label><span>~DATA_FILTER_TYPE_DROPDOWN~</span><span class="tooltiptext">Select data filter type</span></div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_MIN_FLOW_RATE~:</label>&nbsp;<input type="text" id="CONF_MIN_FLOW_RATE" name="CONF_MIN_FLOW_RATE" value="~CONF_MIN_FLOW_RATE~" class="config-text"><span class="tooltiptext">Used to filter out non-zero flow values when bench is not running </span></div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_MIN_BENCH_PRESSURE~:</label>&nbsp;<input type="text" id="CONF_MIN_BENCH_PRESSURE" name="CONF_MIN_BENCH_PRESSURE" value="~CONF_MIN_BENCH_PRESSURE~" class="config-text"><span class="tooltiptext">Minimum reference pressure that bench is considered running</span></div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_MAF_MIN_VOLTS~:</label>&nbsp;<input type="text" id="CONF_MAF_MIN_VOLTS" name="CONF_MAF_MIN_VOLTS" value="~CONF_MAF_MIN_VOLTS~" class="config-text"><span class="tooltiptext">Minimum MAF voltage that bench is considered running</span></div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_CYCLIC_AVERAGE_BUFFER~:</label>&nbsp;<input type="text" id="CONF_CYCLIC_AVERAGE_BUFFER" name="CONF_CYCLIC_AVERAGE_BUFFER" value="~CONF_CYCLIC_AVERAGE_BUFFER~" class="config-text"><span class="tooltiptext">Mean buffer size - Used for smoothing results.</span></div>
          <br>
          <h3>~LANG_GUI_CONVERSION_SETTINGS~</h3>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_ADJ_FLOW_DEPRESSION~:</label>&nbsp;<input type="text" id="ADJ_FLOW_DEPRESSION" name="ADJ_FLOW_DEPRESSION" value="~ADJ_FLOW_DEPRESSION~" class="config-text"><span class="tooltiptext">Bench depression used for adjusted flow calcs</span></div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_STANDARD_REF_CONDITIONS~:</label>
            <select name='STANDARD_REFERENCE' class='config-select'>
              <option value='1' ~STD_REF_1~>ISO 5011 (25&degC(68&degF) 1atm(101.3kPa) 50%RH)</option>
              <option value='2' ~STD_REF_2~>ISO 1585 (25&degC(68&degF) 100kPa  0%RH)</option>
              <option value='3' ~STD_REF_3~>ISA (15&degC(59&degF) 1atm(101.325kPa)  0%RH)</option>
              <option value='4' ~STD_REF_4~>ISO 13443 (15&degC(59&degF) 1atm(101.325kPa)  0%RH)</option>
              <option value='5' ~STD_REF_5~>ISO 2533 (15&degC(59&degF) 1atm(101.325kPa)  0% RH)</option>
              <!--<option value='6'>NIST / EPA (20&degC(68&degF) 1atm(101.325kPa)  --RH(unspecified))</option>-->
            </select>
            <span class="tooltiptext">Standardised Temp, baro and humidity conditions.</span>
          </div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_STANDARDISED_ADJ_FLOW~:</label>&nbsp;<input type="checkbox" id="STD_ADJ_FLOW" name="STD_ADJ_FLOW" value="1" ~STD_ADJ_FLOW~ class="config-text"><span class="tooltiptext">Adjusted flow uses SCFM</span></div>
          <br>
          <h3>~LANG_GUI_DATA_CAPTURE_SETTINGS~</h3>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_CAPTURE_DATATYPE~:</label>
            <select name='DATA_COLLECTION_STANDARD' class='config-select'>
              <option value='1' ~CAP_MODE_1~>Flow (ACFM)</option>
              <option value='1' ~CAP_MODE_2~>Standard Flow (ACFM - ~STANDARD_FLOW~)</option>
              <option value='2' ~CAP_MODE_3~>Adjusted Flow (ACFM @ ~ADJ_FLOW_DEPRESSION~ in/H2O)</option>
              <option value='3' ~CAP_MODE_4~>Adjusted Standard Flow (ACFM - ~STANDARD_FLOW~ @ ~ADJ_FLOW_DEPRESSION~ in/H2O)</option>
              <option value='4' ~CAP_MODE_5~>MAF Flow (~MAF_FLOW_UNIT~)</option>
            </select>
            <span class="tooltiptext">Default data type for data capture.</span>
          </div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_DATA_GRAPH_MAX_VALUE~:</label>
            <select name='DATAGRAPH_MAX' class='config-select'>
              <option value='0' ~DATAGRAPH_MAX_0~>~LANG_GUI_AUTO~</option>
              <option value='1' ~DATAGRAPH_MAX_1~>250 cfm</option>
              <option value='2' ~DATAGRAPH_MAX_2~>500 cfm</option>
              <option value='3' ~DATAGRAPH_MAX_3~>1000 cfm</option>
            </select>
            <span class="tooltiptext">Set max scaling for Data Graph.</span>
          </div>
          <br>
          <h3>~LANG_GUI_CAL_ORIFICE_SETTINGS~</h3>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_CAL_ORIFICE_FLOW_RATE~:</label>&nbsp;<input type="text" id="CONF_CAL_FLOW_RATE" name="CONF_CAL_FLOW_RATE" value="~CONF_CAL_FLOW_RATE~" class="config-text"><span class="tooltiptext">Flow rate of calibration orifice in cfm</span></div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_CAL_ORIFICE_TEST_PRESS~:</label>&nbsp;<input type="text" id="CONF_CAL_REF_PRESS" name="CONF_CAL_REF_PRESS" value="~CONF_CAL_REF_PRESS~" class="config-text"><span class="tooltiptext">Reference depression of calibration orifice in in/wg</span></div>
          <br>
          <div id="orificeData">
            <h3>~LANG_GUI_ORIFICE_DATA~</h3>
            <div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE1_FLOW~:</label>&nbsp;<input type="text" id="ORIFICE1_FLOW_RATE" name="ORIFICE1_FLOW_RATE" value="~ORIFICE1_FLOW_RATE~" class="config-text"><span class="tooltiptext">Flow rate of orifice #1 in cfm</span></div>
            <div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE1_PRESSURE~:</label>&nbsp;<input type="text" id="ORIFICE1_TEST_PRESSURE" name="ORIFICE1_TEST_PRESSURE" value="~ORIFICE1_TEST_PRESSURE~" class="config-text"><span class="tooltiptext">Test Pressure for orifice #1 in in/wg</span></div>
            <div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE2_FLOW~:</label>&nbsp;<input type="text" id="ORIFICE2_FLOW_RATE" name="ORIFICE2_FLOW_RATE" value="~ORIFICE2_FLOW_RATE~" class="config-text"><span class="tooltiptext">Flow rate of orifice #2 in cfm</span></div>
            <div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE2_PRESSURE~:</label>&nbsp;<input type="text" id="ORIFICE2_TEST_PRESSURE" name="ORIFICE2_TEST_PRESSURE" value="~ORIFICE2_TEST_PRESSURE~" class="config-text"><span class="tooltiptext">Test Pressure for orifice #2 in in/wg</span></div>
            <div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE3_FLOW~:</label>&nbsp;<input type="text" id="ORIFICE3_FLOW_RATE" name="ORIFICE3_FLOW_RATE" value="~ORIFICE3_FLOW_RATE~" class="config-text"><span class="tooltiptext">Flow rate of orifice #3 in cfm</span></div>
            <div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE3_PRESSURE~:</label>&nbsp;<input type="text" id="ORIFICE3_TEST_PRESSURE" name="ORIFICE3_TEST_PRESSURE" value="~ORIFICE3_TEST_PRESSURE~" class="config-text"><span class="tooltiptext">Test Pressure for orifice #3 in in/wg</span></div>
            <div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE4_FLOW~:</label>&nbsp;<input type="text" id="ORIFICE4_FLOW_RATE" name="ORIFICE4_FLOW_RATE" value="~ORIFICE4_FLOW_RATE~" class="config-text"><span class="tooltiptext">Flow rate of orifice #4 in cfm</span></div>
            <div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE4_PRESSURE~:</label>&nbsp;<input type="text" id="ORIFICE4_TEST_PRESSURE" name="ORIFICE4_TEST_PRESSURE" value="~ORIFICE4_TEST_PRESSURE~" class="config-text"><span class="tooltiptext">Test Pressure for orifice #4 in in/wg</span></div>
            <div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE5_FLOW~:</label>&nbsp;<input type="text" id="ORIFICE5_FLOW_RATE" name="ORIFICE5_FLOW_RATE" value="~ORIFICE5_FLOW_RATE~" class="config-text"><span class="tooltiptext">Flow rate of orifice #5 in cfm</span></div>
            <div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE5_PRESSURE~:</label>&nbsp;<input type="text" id="ORIFICE5_TEST_PRESSURE" name="ORIFICE5_TEST_PRESSURE" value="~ORIFICE5_TEST_PRESSURE~" class="config-text"><span class="tooltiptext">Test Pressure for orifice #5 in in/wg</span></div>
            <div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE6_FLOW~:</label>&nbsp;<input type="text" id="ORIFICE6_FLOW_RATE" name="ORIFICE6_FLOW_RATE" value="~ORIFICE6_FLOW_RATE~" class="config-text"><span class="tooltiptext">Flow rate of orifice #6 in cfm</span></div>
            <div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE6_PRESSURE~:</label>&nbsp;<input type="text" id="ORIFICE6_TEST_PRESSURE" name="ORIFICE6_TEST_PRESSURE" value="~ORIFICE6_TEST_PRESSURE~" class="config-text"><span class="tooltiptext">Test Pressure for orifice #6 in in/wg</span></div>
            <br>
          </div>
          <br>
          <h3>~LANG_GUI_API_SETTINGS~</h3>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_API_DELIMITER~:</label>&nbsp;<input type="text" id="CONF_API_DELIM" name="CONF_API_DELIM" value="~CONF_API_DELIM~" class="config-text"><span class="tooltiptext">Character used to delimit API / Serial data </span></div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_SERIAL_BAUD_RATE~:</label>&nbsp;<input type="text" id="CONF_SERIAL_BAUD_RATE" name="CONF_SERIAL_BAUD_RATE" value="~CONF_SERIAL_BAUD_RATE~" class="config-text"><span class="tooltiptext">Baud rate for serial communication</span></div>
          <div class="float-right"><input id="save-config-button" type="submit" class="button" value="Save"></div>
          <br>
          <br>
        </form>
        <br>
        <br>
        <form method="POST" action="/api/savecalibration">
          <h2>~LANG_GUI_CALIBRATION_DATA~</h2>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_CAL_OFFSET~:</label>&nbsp;<input type="text" id="FLOW_OFFSET" name="FLOW_OFFSET" value="~FLOW_OFFSET~" class="config-text"><span class="tooltiptext">Measured calibration offset</span></div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_LEAK_TEST_BASELINE~:</label>&nbsp;<input  type="text" id="LEAK_CAL_BASELINE" name="LEAK_CAL_BASELINE" value="~LEAK_CAL_BASELINE~" class="config-text"><span class="tooltiptext">Baseline Offset</span></div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_LEAK_TEST_OFFSET~:</label>&nbsp;<input  type="text" id="LEAK_CAL_OFFSET" name="LEAK_CAL_OFFSET" value="~LEAK_CAL_OFFSET~" class="config-text"><span class="tooltiptext">Measured leak test value</span></div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_LEAK_TEST_BASELINE_REV~:</label>&nbsp;<input  type="text" id="LEAK_CAL_BASELINE_REV" name="LEAK_CAL_BASELINE_REV" value="~LEAK_CAL_BASELINE_REV~" class="config-text"><span class="tooltiptext">Baseline Offset (Reverse Flow)</span></div>
          <div class="config-row tooltip"><label class="config-label">~LANG_GUI_LEAK_TEST_OFFSET_REV~:</label>&nbsp;<input type="text" id="LEAK_CAL_OFFSET_REV" name="LEAK_CAL_OFFSET_REV" value="~LEAK_CAL_OFFSET_REV~" class="config-text"><span class="tooltiptext">Measured leak test value (Reverse Flow)</span></div>
          <br>
          <div class="float-right"><input id="save-config-button" type="submit" class="button" value="~LANG_GUI_OVERWRITE~"></div>
        </form>
      </div>                    
    </div>
  </div>

  <!-- Footer -->
  <div id="footer"><a href="https://diyflowbench.com" target="new">DIYFlowBench.com</a></div>
  <script src="/javascript.js"></script>
  </BODY>
</HTML>
