<!DOCTYPE HTML><html lang="en"><head><title>DIY Flow Bench</title><meta name="viewport" content="width=device-width,initial-scale=1"><style>body,html{height:100vh;margin:0;font-family:Arial;font-size:22px;background-color:#fff;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='562' height='468.3' viewBox='0 0 1080 900'%3E%3Cg fill-opacity='0.03'%3E%3Cpolygon fill='%23444' points='90 150 0 300 180 300'/%3E%3Cpolygon points='90 150 180 0 0 0'/%3E%3Cpolygon fill='%23AAA' points='270 150 360 0 180 0'/%3E%3Cpolygon fill='%23DDD' points='450 150 360 300 540 300'/%3E%3Cpolygon fill='%23999' points='450 150 540 0 360 0'/%3E%3Cpolygon points='630 150 540 300 720 300'/%3E%3Cpolygon fill='%23DDD' points='630 150 720 0 540 0'/%3E%3Cpolygon fill='%23444' points='810 150 720 300 900 300'/%3E%3Cpolygon fill='%23FFF' points='810 150 900 0 720 0'/%3E%3Cpolygon fill='%23DDD' points='990 150 900 300 1080 300'/%3E%3Cpolygon fill='%23444' points='990 150 1080 0 900 0'/%3E%3Cpolygon fill='%23DDD' points='90 450 0 600 180 600'/%3E%3Cpolygon points='90 450 180 300 0 300'/%3E%3Cpolygon fill='%23666' points='270 450 180 600 360 600'/%3E%3Cpolygon fill='%23AAA' points='270 450 360 300 180 300'/%3E%3Cpolygon fill='%23DDD' points='450 450 360 600 540 600'/%3E%3Cpolygon fill='%23999' points='450 450 540 300 360 300'/%3E%3Cpolygon fill='%23999' points='630 450 540 600 720 600'/%3E%3Cpolygon fill='%23FFF' points='630 450 720 300 540 300'/%3E%3Cpolygon points='810 450 720 600 900 600'/%3E%3Cpolygon fill='%23DDD' points='810 450 900 300 720 300'/%3E%3Cpolygon fill='%23AAA' points='990 450 900 600 1080 600'/%3E%3Cpolygon fill='%23444' points='990 450 1080 300 900 300'/%3E%3Cpolygon fill='%23222' points='90 750 0 900 180 900'/%3E%3Cpolygon points='270 750 180 900 360 900'/%3E%3Cpolygon fill='%23DDD' points='270 750 360 600 180 600'/%3E%3Cpolygon points='450 750 540 600 360 600'/%3E%3Cpolygon points='630 750 540 900 720 900'/%3E%3Cpolygon fill='%23444' points='630 750 720 600 540 600'/%3E%3Cpolygon fill='%23AAA' points='810 750 720 900 900 900'/%3E%3Cpolygon fill='%23666' points='810 750 900 600 720 600'/%3E%3Cpolygon fill='%23999' points='990 750 900 900 1080 900'/%3E%3Cpolygon fill='%23999' points='180 0 90 150 270 150'/%3E%3Cpolygon fill='%23444' points='360 0 270 150 450 150'/%3E%3Cpolygon fill='%23FFF' points='540 0 450 150 630 150'/%3E%3Cpolygon points='900 0 810 150 990 150'/%3E%3Cpolygon fill='%23222' points='0 300 -90 450 90 450'/%3E%3Cpolygon fill='%23FFF' points='0 300 90 150 -90 150'/%3E%3Cpolygon fill='%23FFF' points='180 300 90 450 270 450'/%3E%3Cpolygon fill='%23666' points='180 300 270 150 90 150'/%3E%3Cpolygon fill='%23222' points='360 300 270 450 450 450'/%3E%3Cpolygon fill='%23FFF' points='360 300 450 150 270 150'/%3E%3Cpolygon fill='%23444' points='540 300 450 450 630 450'/%3E%3Cpolygon fill='%23222' points='540 300 630 150 450 150'/%3E%3Cpolygon fill='%23AAA' points='720 300 630 450 810 450'/%3E%3Cpolygon fill='%23666' points='720 300 810 150 630 150'/%3E%3Cpolygon fill='%23FFF' points='900 300 810 450 990 450'/%3E%3Cpolygon fill='%23999' points='900 300 990 150 810 150'/%3E%3Cpolygon points='0 600 -90 750 90 750'/%3E%3Cpolygon fill='%23666' points='0 600 90 450 -90 450'/%3E%3Cpolygon fill='%23AAA' points='180 600 90 750 270 750'/%3E%3Cpolygon fill='%23444' points='180 600 270 450 90 450'/%3E%3Cpolygon fill='%23444' points='360 600 270 750 450 750'/%3E%3Cpolygon fill='%23999' points='360 600 450 450 270 450'/%3E%3Cpolygon fill='%23666' points='540 600 630 450 450 450'/%3E%3Cpolygon fill='%23222' points='720 600 630 750 810 750'/%3E%3Cpolygon fill='%23FFF' points='900 600 810 750 990 750'/%3E%3Cpolygon fill='%23222' points='900 600 990 450 810 450'/%3E%3Cpolygon fill='%23DDD' points='0 900 90 750 -90 750'/%3E%3Cpolygon fill='%23444' points='180 900 270 750 90 750'/%3E%3Cpolygon fill='%23FFF' points='360 900 450 750 270 750'/%3E%3Cpolygon fill='%23AAA' points='540 900 630 750 450 750'/%3E%3Cpolygon fill='%23FFF' points='720 900 810 750 630 750'/%3E%3Cpolygon fill='%23222' points='900 900 990 750 810 750'/%3E%3Cpolygon fill='%23222' points='1080 300 990 450 1170 450'/%3E%3Cpolygon fill='%23FFF' points='1080 300 1170 150 990 150'/%3E%3Cpolygon points='1080 600 990 750 1170 750'/%3E%3Cpolygon fill='%23666' points='1080 600 1170 450 990 450'/%3E%3Cpolygon fill='%23DDD' points='1080 900 1170 750 990 750'/%3E%3C/g%3E%3C/svg%3E")}h4{margin-bottom:0}.tablink{background-color:#555;color:#fff;float:left;border:none;outline:0;cursor:pointer;padding:18px 1pc;font-size:22px;width:33.3333%}.tablink:active,.tablink:hover{background-color:#777}#tabcontainer{padding:75pt 20px 20px}.tabcontentMain{display:block}.tabcontentConfig{display:none;margin-bottom:60px}.tabcontentData{display:none}#About,#Contact,#Home,#News{background-color:#fff}html{font-family:Helvetica;display:inline-block;margin:0 auto}.headerbar{overflow:hidden;background-color:#0a1128;text-align:center}.headerbar h1 a:active,.headerbar h1 a:hover,.headerbar h1 a:link,.headerbar h1 a:visited{color:#fff;text-decoration:none;font-size:44px;font-weight:700}h1{font-size:30px}h2{font-size:26px;margin-bottom:14px}h3{font-size:20px}p{font-size:1.5rem}a:active,a:link,a:visited{color:#0a1128;text-decoration:none}a:hover{color:#666;text-decoration:none}hr{clear:both;width:95%}.content{padding:30px}.float-right{float:right}.align-center{text-align:center}.clear-both{clear:both}.tile-grid{max-width:700px;margin:0 auto;display:grid;grid-gap:2rem;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr))}.tile{background-color:#fff;box-shadow:2px 2px 9pt 1px #666;text-align:center}.tile-title{font-size:1rem;font-weight:700;color:#034078;cursor:pointer}.tile-value{color:#333}.pitot-tile-value,.tile-value{font-size:2.1rem;font-weight:700}.pitot-tile-value{color:~PITOT_COLOUR~}.differential-tile-value{font-size:2.1rem;font-weight:700;color:~PDIFF_COLOUR~}#FDIFFTYPEDESC,#PDIFF,#PITOT{cursor:pointer}.flowTargetVal{font-weight:700;font-size:2.1rem;color:#333;cursor:pointer}flowTargetValInput{font-size:22px}#aflow-tile,#maf-tile,#sflow-tile,#tile-fdiff,#tile-pdiff,#tile-swirl{display:none}.config-panel{max-width:650px;margin:auto}.config-row{margin-top:5px}.config-label{padding-left:5px}.config-value{padding-right:10px;float:right}.config-text{width:200px;float:right}.config-select{width:13pc;float:right}.units{font-size:.8rem;color:#666}.status_message{font-size:1.2rem;color:#666;margin-bottom:28px}#footer{clear:both;text-align:center}.hidden_div{display:none}.control-button{height:70px}.button,.control-button{display:inline-block;padding:9pt;font-size:22px;width:150px}.button,.button-sml,.control-button{background-color:#008cba;border:none;border-radius:4px;color:#fff;text-decoration:none;margin:2px;cursor:pointer}.button-sml{float:right;padding:6px;font-size:9pt}#clear-graph-data-button,#record-button{background-color:#fa7b04}#export-graph-data-button{background-color:#2ca909}#load-graph-data-button{background-color:#125ab1}#save-graph-data-button{background-color:#fa7b04}#calibrate-button{background-color:#fa2e04}#clear-message-button{background-color:#999}#file-manager-button,#info-button,#restart-button,#support-button,#update-button{width:110px;height:50px}#on-button{background-color:#44b112}#delete-button,#off-button,#restart-button{background-color:#fa2e04}#upload-form{float:right}.tooltip{position:relative;border-bottom:1px dotted #000}.tooltip .tooltiptext{visibility:hidden;width:350px;background-color:#666;color:#fff;text-align:center;border-radius:6px;padding:5px;position:absolute;z-index:1;left:-10px;top:-5px}.tooltip .tooltiptext:after{content:"";position:absolute;top:100vh;left:50%;margin-left:-5px;border-width:5px;border-style:solid;border-color:#000 transparent transparent}.tooltip:hover .tooltiptext{visibility:visible}.modal{display:none;position:fixed;z-index:1;left:0;padding-top:50px;width:100vw;height:100vh;overflow:auto;background-color:#000;background-color:rgba(0,0,0,.4)}.info-modal-content,.modal-content{background-color:#fefefe;margin:1px auto;padding:20px;border:1px solid #888;width:850px;border-radius:5px;overflow-y:scroll}.info-modal-content{height:25pc}.info-modal{font-size:18px}.column{float:left;width:50%}@media screen and (max-width:600px){.column{width:100%}}.calibrationModal{width:25pc}.serialModal{height:600px}.dataModal{display:block!important;font-size:9pt}@media screen and (max-width:800px){.modal-content{width:100vw}}.file-upload-button{padding:9pt 0;text-align:center}.file-submit-button{padding:9pt 0;text-align:center;font-size:15px;padding:6px}#capture-lift-data-button:active{background-color:#44b113}.input_container{border:1px solid #e5e5e5}input[type=file]::file-selector-button{background-color:#fff;color:#000;border:0;border-right:1px solid #e5e5e5;padding:10px 15px;margin-right:20px;transition:.5s}input[type=file]::file-selector-button:hover{background-color:#eee;border:0;border-right:1px solid #e5e5e5}.closeCalibrationModalButton,.closeCaptureLiftDataModalButton,.closeDataModalButton,.closeExportGraphDataModalButton,.closeFileModalButton,.closeInfoModalButton,.closeLoadGraphDataModalButton,.closeSaveGraphDataModalButton,closeFlowTargetModalButton,closeUpdateModalButton{color:#aaa;float:right;font-size:22px;font-weight:700;cursor:pointer;height:40px;width:100%}.closeCalibrationModalButton:focus,.closeCalibrationModalButton:hover,.closeCaptureLiftDataModalButton:focus,.closeCaptureLiftDataModalButton:hover,.closeDataModalButton:focus,.closeDataModalButton:hover,.closeFileModalButton:focus,.closeFileModalButton:hover,.closeFlowTargetModalButton:focus,.closeFlowTargetModalButton:hover,.closeInfoModalButton:focus,.closeInfoModalButton:hover,.closeLoadGraphDataModalButton:focus,.closeLoadGraphDataModalButton:hover,.closeSaveGraphDataModalButton:focus,.closeSaveGraphDataModalButton:hover,.closeUpdateModalButton:focus,.closeUpdateModalButton:hover{color:#000;text-decoration:none;cursor:pointer}.fileSizeTxt{padding:10px}.fileDelLink{padding:10px;left:75pt}.file-link,.fileDelLink{cursor:pointer}.fileListRow{margin-bottom:10px}.column{float:left;height:40px}.left{width:350px;height:40px}.middle{width:200px}.right{width:75pt}.row:after{content:"";display:table;clear:both}.graph-container{margin-top:50px;text-align:center}svg.graph{height:600px!important;width:750px!important;background-color:#fff;padding-top:75pt;box-shadow:2px 2px 9pt 1px #666;stroke-linejoin:round}svg.graph .grid{stroke:grey;stroke-dasharray:1 2;stroke-width:1}svg.graph .points{stroke-width:3}svg.graph .first_set{fill:#00554d}svg.graph .surfaces{fill-opacity:.5}svg.graph .grid.double{stroke-opacity:.4}svg.graph .labels{font-family:Arial;font-size:14px;kerning:1}svg.graph .labels.x-labels{text-anchor:middle}svg.graph .labels.y-labels{text-anchor:end}.hide{display:none}.dataCircle:hover+.hide{display:block;z-index:2}svg .dataCircle:hover{r:6}.dataCircle{position:relative;opacity:.25}.dataValue{text-anchor:middle;font-size:14px;color:#000;transition:font-size .5s,opacity .3s}.prefTestOK{color:#90ee90}.prefTestNOK,.prefTestOK{font-size:2.1rem;font-weight:700}.prefTestNOK{color:red}.switch-field{margin-top:18px;margin-bottom:18px}.switch-field input{position:absolute!important;clip:rect(0,0,0,0);height:1px;width:1px;border:0;overflow:hidden}.switch-field label{background-color:#989898;color:#fff;font-size:20px;line-height:1;text-align:center;padding:8px;margin-right:-1px;box-shadow:inset 0 1px 3px rgba(0,0,0,.3),0 1px hsla(0,0%,100%,.1);transition:all .1s ease-in-out}.switch-field label:hover{cursor:pointer}.switch-field input:checked+label{background-color:#44b113;box-shadow:none}.switch-field label:first-of-type{border-radius:4px 0 0 4px}.switch-field label:last-of-type{border-radius:0 4px 4px 0}.form{max-width:600px;font-family:Lucida Grande,Tahoma,Verdana,sans-serif;font-weight:400;line-height:1.625;margin:8px auto;padding:1pc}#orifice-data{font-size:22px;color:#666;margin-bottom:18px}</style></head><body><input type="hidden" id="ACTIVE_ORIFICE" value=""><input type="hidden" id="iBENCH_TYPE" value=""><div id="captureLiftDataModal" class="modal"><div class="modal-content"><span class="closeCaptureLiftDataModalButton">&times;</span><h3>~LANG_GUI_SELECT_LIFT_VAL_BEFORE_CAPTURE~</h3><hr><div class="align-center"><form method="POST" class="lift_data_form" name="lift_data_form" enctype="multipart/form-data"><label>~LANG_GUI_LIFT_VAL~</label><br><div class="switch-field"><input type="radio" id="lift-one" name="lift-data" value="1"> <label for="lift-one">~lift1~</label> <input type="radio" id="lift-two" name="lift-data" value="2"> <label for="lift-two">~lift2~</label> <input type="radio" id="lift-three" name="lift-data" value="3"> <label for="lift-three">~lift3~</label> <input type="radio" id="lift-four" name="lift-data" value="4"> <label for="lift-four">~lift4~</label> <input type="radio" id="lift-five" name="lift-data" value="5"> <label for="lift-five">~lift5~</label> <input type="radio" id="lift-six" name="lift-data" value="6"> <label for="lift-six">~lift6~</label> <input type="radio" id="lift-seven" name="lift-data" value="7"> <label for="lift-seven">~lift7~</label> <input type="radio" id="lift-eight" name="lift-data" value="8"> <label for="lift-eight">~lift8~</label> <input type="radio" id="lift-nine" name="lift-data" value="9"> <label for="lift-nine">~lift9~</label> <input type="radio" id="lift-ten" name="lift-data" value="10"> <label for="lift-ten">~lift10~</label> <input type="radio" id="lift-eleven" name="lift-data" value="11"> <label for="lift-eleven">~lift11~</label> <input type="radio" id="lift-twelve" name="lift-data" value="12"> <label for="lift-twelve">~lift12~</label></div><input class="button submit-button" type="button" id="capture-lift-data-button" value="~LANG_GUI_LIFT_CAPTURE~"></form></div><div class="clear-both">&nbsp;</div></div></div><div id="updateModal" class="modal"><div class="modal-content updateModal"><span class="closeUpdateModalButton">&times;</span><div class="align-center"><h3>~LANG_GUI_UPLOAD_FIRMWARE_BINARY~</h3><hr><br><form method="POST" action="/api/update" enctype="multipart/form-data"><div class="input_container"><input type="file" name="update" id="fileUpload"> <input type="submit" value="~LANG_GUI_FIRMWARE_UPDATE~" class="button file-submit-button"></div></form></div></div></div><div id="flowTargetModal" class="modal"><div class="modal-content flowTargetModal"><span class="closeFlowTargetModalButton">&times;</span><div class="align-center"><form method="POST" action="/api/saveflowtarget" enctype="multipart/form-data"><label>~LANG_GUI_USER_FLOW_TARGET_VAL~</label> <input id="flowTargetValInput" type="text" name="USER_OFFSET" value="~USER_OFFSET~"> <input class="button submit-button" type="submit" value="~LANG_GUI_USER_FLOW_TARGET_SAVE~"></form></div></div></div><div id="calibrationModal" class="modal"><div class="modal-content calibrationModal"><span class="closeCalibrationModalButton">&times;</span><div class="align-center"><button id="calibrate-button" class="button">~LANG_GUI_CAL_FLOW_OFFSET~</button> <button id="leak-cal-button" class="button">~LANG_GUI_CAL_LEAK_TEST~</button></div></div></div><div id="dataModal" class="modal"><div class="modal-content dataModal"><span class="closeDataModalButton">&times;</span><div class="align-center"><p><span class="data-title">~LANG_GUI_MAF_VOLTS~</span>&nbsp;<span class="data-value maf_volts" id="MAF_VOLTS">&nbsp;</span></p><p><span class="data-title">~LANG_GUI_PREF_VOLTS~</span>&nbsp;<span class="data-value maf_volts" id="PREF_VOLTS">&nbsp;</span></p><p><span class="data-title">~LANG_GUI_PDIFF_VOLTS~</span>&nbsp;<span class="data-value maf_volts" id="PDIFF_VOLTS">&nbsp;</span></p><p><span class="data-title">~LANG_GUI_PITOT_VOLTS~</span>&nbsp;<span class="data-value maf_volts" id="PITOT_VOLTS">&nbsp;</span></p></div></div></div><div id="loadGraphDataModal" class="modal"><div class="modal-content"><span class="closeLoadGraphDataModalButton">&times;</span><h3>~LANG_GUI_LOAD_LIFT_PROFILE~</h3><hr><br><div class="float-right"><form method="POST" action="/api/viewdata" enctype="multipart/form-data"><input class="button file-submit-button" type="submit" value="~LANG_GUI_LOAD_LIFT_PROFILE_LOAD~"></form></div><div class="clear-both">&nbsp;</div></div></div><div id="saveGraphDataModal" class="modal"><div class="modal-content"><span class="closeSaveGraphDataModalButton">&times;</span><h3>~LANG_GUI_SAVE_LIFT_DATA~</h3><hr><br><div class="float-right"><form method="POST" action="/api/savedata" enctype="multipart/form-data"><label class="config-label">~LANG_GUI_SAVE_GRAPH_FILENAME~:</label>&nbsp;<input type="text" value="~FileName~"> <input class="button file-submit-button" type="submit" value="Load"></form></div><div class="clear-both">&nbsp;</div></div></div><div id="fileModal" class="modal"><div class="modal-content"><span class="closeFileModalButton">&times;</span><h3>~LANG_GUI_FILE_MANAGER~</h3><div id="file_list">~FILE_LIST~</div><br><hr><br><div class="float-right"><form method="POST" action="/api/file/upload" enctype="multipart/form-data"><div class="input_container"><input type="file" name="upload" id="fileUpload"> <input type="submit" value="~LANG_GUI_FILEMANAGER_UPLOAD~" class="button file-submit-button"></div></form></div><div class="clear-both">&nbsp;</div></div></div><div id="infoModal" class="modal"><div class="info-modal-content row"><span class="closeInfoModalButton">&times;</span><div class="row info-modal"><div class="column"><h4>~LANG_GUI_FIRMWARE~</h4><hr><div class="config-row"><label class="config-label">~LANG_GUI_VERSION~:</label><span class="config-value" id="RELEASE">~RELEASE~</span></div><div class="config-row"><label class="config-label">~LANG_GUI_BUILD~:</label><span class="config-value" id="BUILD_NUMBER">~BUILD_NUMBER~</span></div><div class="config-row"><label class="config-label">~LANG_GUI_GUI~:</label><span class="config-value" id="VERSION">@@version@@</span></div><h4>~LANG_GUI_STORAGE~</h4><hr><div class="config-row"><label class="config-label">~LANG_GUI_MEM_SIZE~:</label><span class="config-value" id="SPIFFS_MEM_SIZE">~SPIFFS_MEM_SIZE~</span> (bytes)</div><div class="config-row"><label class="config-label">~LANG_GUI_MEM_USED~:</label><span class="config-value" id="SPIFFS_MEM_USED">~SPIFFS_MEM_USED~</span> (bytes)</div><h4>~LANG_GUI_NETWORK~</h4><hr><div class="config-row"><label class="config-label">~LANG_GUI_IP_ADDRESS~:</label><span class="config-value" id="LOCAL_IP_ADDRESS">~LOCAL_IP_ADDRESS~</span></div><div class="config-row"><label class="config-label">~LANG_GUI_HOSTNAME~:</label><span class="config-value" id="sHOSTNAME">http://~sHOSTNAME~.local</span></div></div><div class="column"><h4>~LANG_GUI_HARDWARE_CONFIG~</h4><hr><div class="config-row"><label class="config-label">~LANG_GUI_BENCH_TYPE~:</label><span class="config-value" id="iBENCH_TYPE">~iBENCH_TYPE~</span></div><div class="config-row"><label class="config-label">~LANG_GUI_BOARD_TYPE~:</label><span class="config-value" id="BOARD_TYPE">~BOARD_TYPE~</span></div><h4>~LANG_GUI_SENS_CONFIG~</h4><hr><div class="config-row"><label class="config-label">~LANG_GUI_MAF_DATA_FILE~:</label><span class="config-value" id="MAF_SENSOR"><a href="~MAF_LINK~" target="new">~MAF_SENSOR~</a></span></div><div class="config-row"><label class="config-label">~LANG_GUI_REF_PRESSURE_SENSOR~:</label><span class="config-value" id="PREF_SENSOR">~PREF_SENSOR~</span></div><div class="config-row"><label class="config-label">~LANG_GUI_TEMP_SENSOR~:</label><span class="config-value" id="TEMP_SENSOR">~TEMP_SENSOR~</span></div><div class="config-row"><label class="config-label">~LANG_GUI_HUMIDITY_SENSOR~:</label><span class="config-value" id="RELH_SENSOR">~RELH_SENSOR~</span></div><div class="config-row"><label class="config-label">~LANG_GUI_BARO_SENSOR~:</label><span class="config-value" id="BARO_SENSOR">~BARO_SENSOR~</span></div><div class="config-row"><label class="config-label">~LANG_GUI_PITOT_SENSOR~:</label><span class="config-value" id="PITOT_SENSOR">~PITOT_SENSOR~</span></div><div class="config-row"><label class="config-label">~LANG_GUI_DIFFERENTIAL_SENSOR~:</label><span class="config-value" id="PDIFF_SENSOR">~PDIFF_SENSOR~</span></div></div></div></div></div><div class="headerbar"><h1><a href="/" id="PAGE_TITLE" alt="DIY Flow Bench">DIY Flow Bench</a></h1></div><button class="tablink" onclick="openTab('dashboard', this)" id="load-dashboard-button">~LANG_GUI_DASHBOARD~</button> <button class="tablink" onclick="openTab('datalog', this)" id="load-datalog-button">~LANG_GUI_DATA~</button> <button class="tablink" onclick="openTab('configuration', this)" id="load-config-button">~LANG_GUI_CONFIG~</button><div id="tabcontainer"><div id="dashboard" class="tabcontent tabcontentMain"><div class="content"><div class="tile-grid"><div class="tile tile-pref" id="tile-pref"><p class="tile-title" id="tile-pref-title">~LANG_GUI_PREF~</p><p><span class="tile-value" id="PREF">&nbsp;</span></p><p class="units">inH2O</p></div><div class="tile tile-pdiff" id="tile-pdiff"><p class="tile-title" id="tile-pdiff-title">~LANG_GUI_PDIFF~</p><p><span class="differential-tile-value" id="PDIFF">&nbsp;</span></p><p class="units">inH2O</p></div><div class="tile tile-flow" id="flow-tile"><p class="tile-title" id="flow-tile-title">~LANG_GUI_FLOW~</p><p><span class="tile-value" id="FLOW">&nbsp;</span></p><p class="units">ACFM</p></div><div class="tile tile-aflow" id="aflow-tile"><p class="tile-title" id="aflow-tile-title">~LANG_GUI_AFLOW~</p><p><span class="tile-value" id="AFLOW">&nbsp;</span></p><p class="units">~AFLOW_UNITS~&nbsp;&commat;&nbsp;<span id="PADJUST">28</span>&nbsp;inH2O</p></div><div class="tile tile-sflow" id="sflow-tile"><p class="tile-title" id="sflow-tile-title">~LANG_GUI_SFLOW~</p><p><span class="tile-value" id="SFLOW">&nbsp;</span></p><p class="units">SCFM:&nbsp;<span id="iSTD_REF">~iSTD_REF~</span></p></div><div class="tile tile-flow" id="maf-tile"><p class="tile-title" id="maf-tile-title">~LANG_GUI_MFLOW~</p><p><span class="tile-value" id="MFLOW">&nbsp;</span></p><p class="units">KGH</p></div><div class="tile tile-pitot" id="tile-pitot"><p class="tile-title" id="tile-pitot-title">~LANG_GUI_PITOT~</p><p><span class="pitot-tile-value" id="PITOT">&nbsp;</span></p><p class="units">m/sec &Delta; <span id="PITOT_DELTA">~PITOT_DELTA~</span>&nbsp;inH2O</p></div><div class="tile tile-swirl" id="tile-swirl"><p class="tile-title" id="tile-swirl-title">~LANG_GUI_SWIRL~</p><p><span class="tile-value" id="SWIRL">&nbsp;</span></p><p class="units">rpm</p></div><div class="tile tile-fdiff" id="tile-fdiff"><p class="tile-title" id="tile-fdiff-title">~LANG_GUI_FLOW_DIFF~</p><p><span class="tile-value flowTargetVal" id="FDIFF">&nbsp;</span></p><p class="units"><span id="FDIFFTYPEDESC">~FDIFFTYPEDESC~</span></p></div><div class="tile tile-temp" id="tile-temp"><p class="tile-title" id="tile-temp-title">~LANG_GUI_TEMP~</p><p><span class="tile-value" id="TEMP">&nbsp;</span></p><p class="units">~iTEMP_UNIT~</p></div><div class="tile tile-baro" id="tile-baro"><p class="tile-title" id="tile-baro-title">~LANG_GUI_BARO~</p><p><span class="tile-value" id="BARO">&nbsp;</span></p><p class="units">millibar (hPa)</p></div><div class="tile tile-relh" id="tile-relh"><p class="tile-title" id="tile-relh-title">~LANG_GUI_HUMIDITY~</p><p><span class="tile-value" id="RELH">&nbsp;</span></p><p class="units">&percnt;RelH</p></div></div></div><div class="align-center"><div class="status_message"><span id="STATUS_MESSAGE">~STATUS_MESSAGE~</span></div><div class="hidden_div"><br>Ref Pressure mV: <span id="PREF_MV">&nbsp;</span><br>MAF mV: <span id="MAF_MV">&nbsp;</span><br>Pitot mV: <span id="PITOT_MV">&nbsp;</span></div><form method="POST" id="orificeRadio" style="display: none;"><div class="switch-field"><input type="radio" id="orifice1" name="radioOrifice" value="1" ~orifice1_checked~ onchange="orificeChange(this);"> <label for="orifice1">1</label> <input type="radio" id="orifice2" name="radioOrifice" value="2" ~orifice2_checked~ onchange="orificeChange(this);"> <label for="orifice2">2</label> <input type="radio" id="orifice3" name="radioOrifice" value="3" ~orifice3_checked~ onchange="orificeChange(this);"> <label for="orifice3">3</label> <input type="radio" id="orifice4" name="radioOrifice" value="4" ~orifice4_checked~ onchange="orificeChange(this);"> <label for="orifice4">4</label> <input type="radio" id="orifice5" name="radioOrifice" value="5" ~orifice5_checked~ onchange="orificeChange(this);"> <label for="orifice5">5</label> <input type="radio" id="orifice6" name="radioOrifice" value="6" ~orifice6_checked~ onchange="orificeChange(this);"> <label for="orifice6">6</label></div><div id="orifice-data">Calibrated Flow Rate: <span id="ORIFICE_MAX_FLOW">~ORIFICE_MAX_FLOW~</span>cfm @ <span id="ORIFICE_CALIBRATED_DEPRESSION">~ORIFICE_CALIBRATED_DEPRESSION~</span> inH2O"</div></form><button id="on-button" class="control-button">~LANG_GUI_START~</button> <button id="off-button" class="control-button">~LANG_GUI_STOP~</button> <button id="clear-message-button" class="control-button">~LANG_GUI_CLEAR_ALARM~</button><br><button id="show-capture-modal-button" class="control-button">~LANG_GUI_CAPTURE~</button></div></div><div id="datalog" class="tabcontent tabcontentData"><div class="graph-container"><svg class="graph" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" id="dataGraph" style="background-color: #fff; padding-top: 100px;"><g class="grid x-grid" id="xGrid" style="stroke: grey; stroke-dasharray: 1 2; stroke-width: 1;"><line x1="100" x2="100" y1="0" y2="510"></line><line x1="150" x2="150" y1="0" y2="510"></line><line x1="200" x2="200" y1="0" y2="510"></line><line x1="250" x2="250" y1="0" y2="510"></line><line x1="300" x2="300" y1="0" y2="510"></line><line x1="350" x2="350" y1="0" y2="510"></line><line x1="400" x2="400" y1="0" y2="510"></line><line x1="450" x2="450" y1="0" y2="510"></line><line x1="500" x2="500" y1="0" y2="510"></line><line x1="550" x2="550" y1="0" y2="510"></line><line x1="600" x2="600" y1="0" y2="510"></line><line x1="650" x2="650" y1="0" y2="510"></line><line x1="700" x2="700" y1="0" y2="510"></line></g><g class="grid y-grid" id="yGrid" style="stroke: grey; stroke-dasharray: 1 2; stroke-width: 1;"><line x1="90" x2="700" y1="0" y2="0"></line><line x1="90" x2="700" y1="50" y2="50"></line><line x1="90" x2="700" y1="100" y2="100"></line><line x1="90" x2="700" y1="150" y2="150"></line><line x1="90" x2="700" y1="200" y2="200"></line><line x1="90" x2="700" y1="250" y2="250"></line><line x1="90" x2="700" y1="300" y2="300"></line><line x1="90" x2="700" y1="350" y2="350"></line><line x1="90" x2="700" y1="400" y2="400"></line><line x1="90" x2="700" y1="450" y2="450"></line><line x1="90" x2="700" y1="500" y2="500"></line></g><g class="labels x-labels"><text x="100" y="550">Lift:</text><text x="150" y="550">~lift1~</text><text x="200" y="550">~lift2~</text><text x="250" y="550">~lift3~</text><text x="300" y="550">~lift4~</text><text x="350" y="550">~lift5~</text><text x="400" y="550">~lift6~</text><text x="450" y="550">~lift7~</text><text x="500" y="550">~lift8~</text><text x="550" y="550">~lift9~</text><text x="600" y="550">~lift10~</text><text x="650" y="550">~lift11~</text><text x="700" y="550">~lift12~</text></g><g class="labels y-labels"><text x="80" y="10">~flow10~</text><text x="80" y="60">~flow9~</text><text x="80" y="110">~flow8~</text><text x="80" y="160">~flow7~</text><text x="80" y="210">~flow6~</text><text x="80" y="260">~flow5~</text><text x="80" y="310">~flow4~</text><text x="80" y="360">~flow3~</text><text x="80" y="410">~flow2~</text><text x="80" y="460">~flow1~</text><text x="80" y="510">Flow (cfm)</text></g><g class="labels key-labels"></g><g class="surfaces" id="lineData"><polyline fill="none" stroke="#000" stroke-width="1" stroke-dasharray="4, 1" points="100,500 150,~LINE_DATA1~ 200,~LINE_DATA2~ 250,~LINE_DATA3~ 300,~LINE_DATA4~ 350,~LINE_DATA5~ 400,~LINE_DATA6~ 450,~LINE_DATA7~ 500,~LINE_DATA8~ 550,~LINE_DATA9~ 600,~LINE_DATA10~ 650,~LINE_DATA11~ 700,~LINE_DATA12~"/></g><use class="grid double" xlink:href="#xGrid"></use><use class="grid double" xlink:href="#yGrid"></use></svg></div><div class="align-center"><br><button id="clear-graph-data-button" class="control-button">~LANG_GUI_CLEAR~</button> <button id="export-graph-data-button" class="control-button">~LANG_GUI_EXPORT~</button> <button id="export-graph-image-button" class="control-button">~LANG_GUI_IMAGE~</button> <a href="/api/file/download/liftdata.json" download id="file-data-download" hidden></a></div></div><div id="configuration" class="tabcontent tabcontentConfig"><div class="config-panel"><p style="text-align:center"><button id="file-manager-button" class="button">Files</button> <button id="info-button" class="button">Info</button> <button id="support-button" class="button" onclick="window.open('https://github.com/DeeEmm/DIY-Flow-Bench/wiki','_blank')">Support</button> <button id="restart-button" class="button">Reboot</button> <button id="update-button" class="button">Update</button></p><br><form method="POST" action="/api/saveconfig"><h2>~LANG_GUI_SYS_SETTINGS~</h2><h3>~LANG_GUI_WIFI_INFO~</h3><div class="config-row tooltip"><label class="config-label">~LANG_GUI_WIFI_SSID~:</label>&nbsp;<input type="text" id="sWIFI_SSID" name="sWIFI_SSID" value="~sWIFI_SSID~" class="config-text"><span class="tooltiptext">The name of your WiFi network</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_WIFI_PASS~:</label>&nbsp;<input type="text" id="sWIFI_PSWD" name="sWIFI_PSWD" value="~sWIFI_PSWD~" class="config-text"><span class="tooltiptext">Your WiFi Password</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_WIFI_AP_SSID~:</label>&nbsp;<input type="text" id="sWIFI_AP_SSID" name="sWIFI_AP_SSID" value="~sWIFI_AP_SSID~" class="config-text"><span class="tooltiptext">Access-Point name for direct WiFi connection</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_WIFI_AP_PASS~:</label>&nbsp;<input type="text" id="sWIFI_AP_PSWD" name="sWIFI_AP_PSWD" value="~sWIFI_AP_PSWD~" class="config-text"><span class="tooltiptext">Access-Point password</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_HOSTNAME~:</label>&nbsp;<input type="text" id="sHOSTNAME" name="sHOSTNAME" value="~sHOSTNAME~" class="config-text"><span class="tooltiptext">DNS Hostname (used for connecting via URL e.g. http://diyfb.local)</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_WIFI_TIMEOUT~:</label>&nbsp;<input type="text" id="iWIFI_TIMEOUT" name="iWIFI_TIMEOUT" value="~iWIFI_TIMEOUT~" class="config-text"><span class="tooltiptext">Number of milliseconds before WiFi retries connection</span></div><br><h3>~LANG_GUI_GENERAL_SETTINGS~</h3><div class="config-row tooltip"><label class="config-label">~LANG_GUI_BENCH_TYPE~:</label><span>~iBENCH_TYPE_DROPDOWN~</span><span class="tooltiptext">Select bench type</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_MAF_DIAMETER~:</label>&nbsp;<input type="text" id="iMAF_DIAMETER" name="iMAF_DIAMETER" value="~iMAF_DIAMETER~" class="config-text"><span class="tooltiptext">Diameter of MAF Housing. (Leave as zero to use standard housing diameter)</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_REFRESH_RATE~:</label>&nbsp;<input type="text" id="iREFRESH_RATE" name="iREFRESH_RATE" value="~iREFRESH_RATE~" class="config-text"><span class="tooltiptext">Screen refresh rate in milliseconds</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_TEMPERATURE_UNIT~:</label><span>~TEMPERATURE_DROPDOWN~</span><span class="tooltiptext">Display unit of temperature</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_LIFT_INTERVAL~:</label>&nbsp;<input type="text" id="dLIFT_INTERVAL" name="dLIFT_INTERVAL" value="~dLIFT_INTERVAL~" class="config-text"><span class="tooltiptext">Distance between valve lift data points</span></div><br><h3>~LANG_GUI_RESOLUTION_AND_ACCURACY~</h3><div class="config-row tooltip"><label class="config-label">~LANG_GUI_GEN_DECIMAL_ACCURACY~:</label> <span>~iGEN_DECI_ACC_DROPDOWN~</span> <span class="tooltiptext">Number of decimal places used in UI</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_FLOW_DECIMAL_ROUNDING~:</label> <span>~iFLOW_DECI_ACC_DROPDOWN~</span> <span class="tooltiptext">Number of decimal places used in UI for flow values</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_FLOW_VAL_ROUNDING~:</label> <span>~iROUNDING_TYP_DROPDOWN~</span> <span class="tooltiptext">Rounding used in flow calculations</span></div><br><h3>~LANG_GUI_DATA_FILTERS~</h3><div class="config-row tooltip"><label class="config-label">~LANG_GUI_DATA_FLTR_TYP~:</label><span>~iDATA_FLTR_TYP_DROPDOWN~</span><span class="tooltiptext">Select data filter type</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_MIN_FLOW_RATE~:</label>&nbsp;<input type="text" id="iMIN_FLOW_RATE" name="iMIN_FLOW_RATE" value="~iMIN_FLOW_RATE~" class="config-text"><span class="tooltiptext">Used to filter out non-zero flow values when bench is not running</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_MIN_PRESSUREURE~:</label>&nbsp;<input type="text" id="iMIN_PRESSURE" name="iMIN_PRESSURE" value="~iMIN_PRESSURE~" class="config-text"><span class="tooltiptext">Minimum reference pressure that bench is considered running</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_MAF_MIN_VOLTS~:</label>&nbsp;<input type="text" id="iMAF_MIN_VOLTS" name="iMAF_MIN_VOLTS" value="~iMAF_MIN_VOLTS~" class="config-text"><span class="tooltiptext">Minimum MAF voltage that bench is considered running</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_CYCLIC_AVERAGE_BUFFER~:</label>&nbsp;<input type="text" id="iCYC_AV_BUFF" name="iCYC_AV_BUFF" value="~iCYC_AV_BUFF~" class="config-text"><span class="tooltiptext">Mean buffer size - Used for smoothing results.</span></div><br><h3>~LANG_GUI_CONVERSION_SETTINGS~</h3><div class="config-row tooltip"><label class="config-label">~LANG_GUI_ADJ_FLOW_DEP~:</label>&nbsp;<input type="text" id="iADJ_FLOW_DEP" name="iADJ_FLOW_DEP" value="~iADJ_FLOW_DEP~" class="config-text"><span class="tooltiptext">Bench depression used for adjusted flow calcs</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_STANDARD_REF_CONDITIONS~:</label> <select name="iSTD_REF" class="config-select"><option value="1" ~std_ref_1~>ISO 5011 (20&degC(68&degF) 1atm(101.3kPa) 50%RH)</option><option value="2" ~std_ref_2~>ISO 1585 (25&degC(68&degF) 100kPa 0%RH)</option><option value="3" ~std_ref_3~>ISA (15&degC(59&degF) 1atm(101.325kPa) 0%RH)</option><option value="4" ~std_ref_4~>ISO 13443 (15&degC(59&degF) 1atm(101.325kPa) 0%RH)</option><option value="5" ~std_ref_5~>ISO 2533 (15&degC(59&degF) 1atm(101.325kPa) 0% RH)</option></select> <span class="tooltiptext">Standardised Temp, baro and humidity conditions.</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_STANDARDISED_ADJ_FLOW~:</label>&nbsp;<input type="checkbox" id="iSTD_ADJ_FLOW" name="iSTD_ADJ_FLOW" value="1" ~std_adj_flow~ class="config-text"><span class="tooltiptext">Adjusted flow uses SCFM</span></div><br><h3>~LANG_GUI_DATA_CAPTURE_SETTINGS~</h3><div class="config-row tooltip"><label class="config-label">~LANG_GUI_CAPTURE_DATATYPE~:</label> <select name="DATA_COLLECTION_STANDARD" class="config-select"><option value="1" ~cap_mode_1~>Flow (ACFM)</option><option value="1" ~cap_mode_2~>Standard Flow (ACFM - ~STANDARD_FLOW~)</option><option value="2" ~cap_mode_3~>Adjusted Flow (ACFM @ ~iADJ_FLOW_DEP~ in/H2O)</option><option value="3" ~cap_mode_4~>Adjusted Standard Flow (ACFM - ~STANDARD_FLOW~ @ ~iADJ_FLOW_DEP~ in/H2O)</option><option value="4" ~cap_mode_5~>MAF Flow (~MAF_FLOW_UNIT~)</option></select> <span class="tooltiptext">Default data type for data capture.</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_DATA_GRAPH_MAX_VAL~:</label> <select name="iDATAGRAPH_MAX" class="config-select"><option value="0" ~datagraph_max_0~>~LANG_GUI_AUTO~</option><option value="1" ~datagraph_max_1~>250 cfm</option><option value="2" ~datagraph_max_2~>500 cfm</option><option value="3" ~datagraph_max_3~>1000 cfm</option></select> <span class="tooltiptext">Set max scaling for Data Graph.</span></div><br><h3>~LANG_GUI_CAL_ORIFICE_SETTINGS~</h3><div class="config-row tooltip"><label class="config-label">~LANG_GUI_CAL_ORIFICE_FLOW_RATE~:</label>&nbsp;<input type="text" id="dCAL_FLW_RATE" name="dCAL_FLW_RATE" value="~dCAL_FLW_RATE~" class="config-text"><span class="tooltiptext">Flow rate of calibration orifice in cfm</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_CAL_ORIFICE_TEST_PRESS~:</label>&nbsp;<input type="text" id="dCAL_REF_PRESS" name="dCAL_REF_PRESS" value="~dCAL_REF_PRESS~" class="config-text"><span class="tooltiptext">Reference depression of calibration orifice in in/wg</span></div><br><div id="orificeData"><h3>~LANG_GUI_ORIFICE_DATA~</h3><div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE1_FLOW~:</label>&nbsp;<input type="text" id="dORIFICE1_FLOW" name="dORIFICE1_FLOW" value="~dORIFICE1_FLOW~" class="config-text"><span class="tooltiptext">Flow rate of orifice #1 in cfm</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE1_PRESSURE~:</label>&nbsp;<input type="text" id="dORIFICE1_PRESS" name="dORIFICE1_PRESS" value="~dORIFICE1_PRESS~" class="config-text"><span class="tooltiptext">Test Pressure for orifice #1 in in/wg</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE2_FLOW~:</label>&nbsp;<input type="text" id="dORIFICE2_FLOW" name="dORIFICE2_FLOW" value="~dORIFICE2_FLOW~" class="config-text"><span class="tooltiptext">Flow rate of orifice #2 in cfm</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE2_PRESSURE~:</label>&nbsp;<input type="text" id="dORIFICE2_PRESS" name="dORIFICE2_PRESS" value="~dORIFICE2_PRESS~" class="config-text"><span class="tooltiptext">Test Pressure for orifice #2 in in/wg</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE3_FLOW~:</label>&nbsp;<input type="text" id="dORIFICE3_FLOW" name="dORIFICE3_FLOW" value="~dORIFICE3_FLOW~" class="config-text"><span class="tooltiptext">Flow rate of orifice #3 in cfm</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE3_PRESSURE~:</label>&nbsp;<input type="text" id="dORIFICE3_PRESS" name="dORIFICE3_PRESS" value="~dORIFICE3_PRESS~" class="config-text"><span class="tooltiptext">Test Pressure for orifice #3 in in/wg</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE4_FLOW~:</label>&nbsp;<input type="text" id="dORIFICE4_FLOW" name="dORIFICE4_FLOW" value="~dORIFICE4_FLOW~" class="config-text"><span class="tooltiptext">Flow rate of orifice #4 in cfm</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE4_PRESSURE~:</label>&nbsp;<input type="text" id="dORIFICE4_PRESS" name="dORIFICE4_PRESS" value="~dORIFICE4_PRESS~" class="config-text"><span class="tooltiptext">Test Pressure for orifice #4 in in/wg</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE5_FLOW~:</label>&nbsp;<input type="text" id="dORIFICE5_FLOW" name="dORIFICE5_FLOW" value="~dORIFICE5_FLOW~" class="config-text"><span class="tooltiptext">Flow rate of orifice #5 in cfm</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE5_PRESSURE~:</label>&nbsp;<input type="text" id="dORIFICE5_PRESS" name="dORIFICE5_PRESS" value="~dORIFICE5_PRESS~" class="config-text"><span class="tooltiptext">Test Pressure for orifice #5 in in/wg</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE6_FLOW~:</label>&nbsp;<input type="text" id="dORIFICE6_FLOW" name="dORIFICE6_FLOW" value="~dORIFICE6_FLOW~" class="config-text"><span class="tooltiptext">Flow rate of orifice #6 in cfm</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_ORIFICE6_PRESSURE~:</label>&nbsp;<input type="text" id="dORIFICE6_PRESS" name="dORIFICE6_PRESS" value="~dORIFICE6_PRESS~" class="config-text"><span class="tooltiptext">Test Pressure for orifice #6 in in/wg</span></div><br></div><br><h3>~LANG_GUI_API_SETTINGS~</h3><div class="config-row tooltip"><label class="config-label">~LANG_GUI_API_DELIMITER~:</label>&nbsp;<input type="text" id="sAPI_DELIM" name="sAPI_DELIM" value="~sAPI_DELIM~" class="config-text"><span class="tooltiptext">Character used to delimit API / Serial data</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_SERIAL_BAUD~:</label>&nbsp;<input type="text" id="iSERIAL_BAUD" name="iSERIAL_BAUD" value="~iSERIAL_BAUD~" class="config-text"><span class="tooltiptext">Baud rate for serial communication</span></div><div class="float-right"><input id="save-config-button" type="submit" class="button" value="Save"></div><br><br></form><br><br><form method="POST" action="/api/savecalibration"><h2>~LANG_GUI_CALIBRATION_DATA~</h2><div class="config-row tooltip"><label class="config-label">~LANG_GUI_CAL_OFFSET~:</label>&nbsp;<input type="text" id="FLOW_OFFSET" name="FLOW_OFFSET" value="~FLOW_OFFSET~" class="config-text"><span class="tooltiptext">Measured calibration offset</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_LEAK_TEST_BASELINE~:</label>&nbsp;<input type="text" id="LEAK_BASE" name="LEAK_BASE" value="~LEAK_BASE~" class="config-text"><span class="tooltiptext">Baseline Offset</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_LEAK_TEST_OFFSET~:</label>&nbsp;<input type="text" id="LEAK_OFFSET" name="LEAK_OFFSET" value="~LEAK_OFFSET~" class="config-text"><span class="tooltiptext">Measured leak test value</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_LEAK_TEST_BASELINE_REV~:</label>&nbsp;<input type="text" id="LEAK_BASE_REV" name="LEAK_BASE_REV" value="~LEAK_BASE_REV~" class="config-text"><span class="tooltiptext">Baseline Offset (Reverse Flow)</span></div><div class="config-row tooltip"><label class="config-label">~LANG_GUI_LEAK_TEST_OFFSET_REV~:</label>&nbsp;<input type="text" id="LEAK_OFFSET_REV" name="LEAK_OFFSET_REV" value="~LEAK_OFFSET_REV~" class="config-text"><span class="tooltiptext">Measured leak test value (Reverse Flow)</span></div><br><div class="float-right"><input id="save-config-button" type="submit" class="button" value="~LANG_GUI_OVERWRITE~"></div></form></div></div></div><div id="footer"><a href="https://diyflowbench.com" target="new">DIYFlowBench.com</a></div><script>/***********************************************************
* javascript.js
*
* Browser control code for DIY-Flow-bench project: diyflowbench.com
* Handles data transmission and display update tasks
* Provides UI control to browser
*
***/

var leakCalVal;
var flowCalVal;
var leakCalTolerance;
var leakTestThreshold;
var updateSSE = true;
var active_orifice;
var runOnce = false;

window.addEventListener('load', onLoad);

var fileModal = document.getElementById("fileModal");
var infoModal = document.getElementById("infoModal");
var captureLiftDataModal = document.getElementById("captureLiftDataModal");
var loadGraphDataModal = document.getElementById("loadGraphDataModal");
var saveGraphDataModal = document.getElementById("saveGraphDataModal");
var calibrationModal = document.getElementById("calibrationModal");
var dataModal = document.getElementById("dataModal");
var serialModal = document.getElementById("serialModal");
var updateModal = document.getElementById("updateModal");
var flowTargetModal = document.getElementById("flowTargetModal");


var closeFlowTargetModalButton = document.getElementsByClassName("closeFlowTargetModalButton")[0];
var closeCalibrationModalButton = document.getElementsByClassName("closeCalibrationModalButton")[0];
var closeDataModalButton = document.getElementsByClassName("closeDataModalButton")[0];
var closeSerialModalButton = document.getElementsByClassName("closeSerialModalButton")[0];
var closeFileModalButton = document.getElementsByClassName("closeFileModalButton")[0];
var closeInfoModalButton = document.getElementsByClassName("closeInfoModalButton")[0];
var closeCaptureLiftDataModalButton = document.getElementsByClassName("closeCaptureLiftDataModalButton")[0];
var closeLoadGraphDataModalButton = document.getElementsByClassName("closeLoadGraphDataModalButton")[0];
var closeSaveGraphDataModalButton = document.getElementsByClassName("closeSaveGraphDataModalButton")[0];
var closeCalibrationModalButton = document.getElementsByClassName("closeCalibrationModalButton")[0];
var closeUpdateModalButton = document.getElementsByClassName("closeUpdateModalButton")[0];

// Set up Server Side Events (SSE)
if (!!window.EventSource) {
  var source = new EventSource('/events');

  source.addEventListener('JSON_DATA', function(e) {
    var myObj = JSON.parse(e.data);

    if (updateSSE === true){

      for (key in myObj) {
        try {
          if (typeof myObj[key] === 'string' || myObj[key] instanceof String) {
          // We've got a string...
            if (key === 'PITOT_COLOUR' || key === 'PDIFF_COLOUR' ) {
            } else {
              // it' a template variable
              document.getElementById(key).innerHTML = myObj[key];
            }
 
          } else {
           // we've not got a string... 
           if (key === 'FLOW' || key === 'AFLOW' || key === 'MFLOW' || key === 'SFLOW' || key === 'FDIFF') {
              // HACK: template vars - replaced before page load
              document.getElementById(key).innerHTML = myObj[key].toFixed(~iFLOW_DECI_ACC~);  
            } else if (key === 'PREF' || key === 'PDIFF' || key === 'PITOT' || key === 'PITOT_DELTA' || key === 'SWIRL' || key === 'TEMP' || key === 'BARO' || key === 'RELH') {
              document.getElementById(key).innerHTML = myObj[key].toFixed(~iGEN_DECI_ACC~); 
            //} else if (key === '') {
            } else {
              document.getElementById(key).innerHTML = myObj[key];
            }
          }
        } catch (error) {
          console.log('Missing or incorrect JSON data');
          console.log(" error: " + error + " key: " + key );
          // console.log(key);
        }
      } 

      // get bench type and set up GUI accoordingly
      var benchType = myObj["iBENCH_TYPE"];

      // get active orifice and set up GUI accoordingly
      active_orifice = myObj["ACTIVE_ORIFICE"];
      if (runOnce == false ){
        radioButton = document.getElementById("orifice" + active_orifice);
        radioButton.checked = true;
      }

      switch (benchType) {
    
        case "MAF":
          document.getElementById('orificeData').style.display='none';
          document.getElementById('orificeRadio').style.display='none';
        break;
    
        case "ORIFICE":
          document.getElementById('orificeData').style.display='block';
          document.getElementById('orificeRadio').style.display='block';
        break;
          
        case "VENTURI":
          document.getElementById('orificeData').style.display='block';
        break;
          
        case "PITOT":
          document.getElementById('orificeData').style.display='block';
        break;
          
      }

      // Get data filter type
      var dataFilterType = myObj["iDATA_FLTR_TYP"];

      // Get Pitot Tile status colours
      var pitotTileColour = myObj["PITOT_COLOUR"];
      document.getElementById('PITOT').style.color=pitotTileColour;

      // Get pDiff tile tatus colours
      var pDiffTileColour = myObj["PDIFF_COLOUR"];
      document.getElementById('PDIFF').style.color=pDiffTileColour;
    }

  }, false);



}



/***********************************************************
* onFileUpload event handler
***/
function onFileUpload(event) {
  this.setState({file: event.target.files[0]});
  const {file} = this.state;
  const data = new FormData;
  data.append('data', file);
  fetch('/api/file/upload', {
      method: 'POST',
      body: data
  })
      .catch(e => {
          console.log('Request failed', e);
      });
}



/***********************************************************
* onLoad event handler
***/
function onLoad(event) {

  initialiseButtons();
  const urlParams = new URLSearchParams(window.location.search);
  const view = urlParams.get('view');  
  
  switch (view) {
  
    case "upload":
      document.getElementById("load-config-button").click();
      document.getElementById('fileModal').style.display='block';
    break;

    case "graph":
      document.getElementById("load-datalog-button").click();
      document.getElementById('datalog').style.display='block';
    break;
      
    case "config":
      document.getElementById("load-config-button").click();
    break;

    case "data":
      document.getElementById('dataModal').style.display='block';
    break;

    
  }

  // Set tile status on page reload from cookie data
  var tileStatus = getCookie('pressure-tile');
  
  switch (tileStatus) {

    case "pdiff":
      document.getElementById('tile-pref').style.display='none';
      document.getElementById('tile-pdiff').style.display='block';
    break;

    case "pref":
      document.getElementById('tile-pref').style.display='block';
      document.getElementById('tile-pdiff').style.display='none';
    break;

  }

  var tileStatus = getCookie('flow-tile');

  switch (tileStatus){

    case "flow":
      document.getElementById('flow-tile').style.display='block';
      document.getElementById('aflow-tile').style.display='none';
      document.getElementById('sflow-tile').style.display='none';
      document.getElementById('maf-tile').style.display='none';
    break;

    case "aflow":
      document.getElementById('flow-tile').style.display='none';
      document.getElementById('aflow-tile').style.display='block';
      document.getElementById('sflow-tile').style.display='none';
      document.getElementById('maf-tile').style.display='none';
    break;

    case "sflow":
      document.getElementById('flow-tile').style.display='none';
      document.getElementById('aflow-tile').style.display='none';
      document.getElementById('sflow-tile').style.display='block';
      document.getElementById('maf-tile').style.display='none';
    break;

    case "maf":
      document.getElementById('flow-tile').style.display='none';
      document.getElementById('aflow-tile').style.display='none';
      document.getElementById('sflow-tile').style.display='none';
      document.getElementById('maf-tile').style.display='block';
    break;

  }


  var tileStatus = getCookie('tool-tile');

  switch (tileStatus){

    case "pitot":
      document.getElementById('tile-pitot').style.display='block';
      document.getElementById('tile-swirl').style.display='none';
      document.getElementById('tile-fdiff').style.display='none';
    break;

    case "swirl":
      document.getElementById('tile-pitot').style.display='none';
      document.getElementById('tile-swirl').style.display='block';
      document.getElementById('tile-fdiff').style.display='none';
    break;

    case "fdiff":
      document.getElementById('tile-pitot').style.display='none';
      document.getElementById('tile-swirl').style.display='none';
      document.getElementById('tile-fdiff').style.display='block';
    break;
  
  }

  console.log('Page Loaded');
  
}



/***********************************************************
* Initialise buttons
***/
function initialiseButtons() {
  
  var xhr = new XMLHttpRequest();

  document.getElementById('show-capture-modal-button').addEventListener('click', function(){
    document.getElementById('captureLiftDataModal').style.display='block';
  });

  document.getElementById('FDIFF').addEventListener('click', function(){
    document.getElementById('flowTargetModal').style.display='block';
  });

  document.getElementById('clear-graph-data-button').addEventListener('click', function(){
        
    // clear data points from graph
    // var p = document.getElementById('dataPlot');
    // var child = p.lastElementChild; 
    // while (child) {
    //     p.removeChild(child);
    //     child = p.lastElementChild;
    // }
    // clear line data from graph
    var l = document.getElementById('lineData');
    var child = l.lastElementChild; 
    while (child) {
        l.removeChild(child);
        child = l.lastElementChild;
    }

    xhr.open('POST', '/api/clearLiftData');
    xhr.onload = function() {
      if (xhr.status === 200) window.location.href = '/?view=graph';
    };
    xhr.send();

  });
  
  document.getElementById('export-graph-data-button').addEventListener('click', function(){
    // initiate JSON Data download from browser
    document.getElementById('file-data-download').click();
  });

  document.getElementById('export-graph-image-button').addEventListener('click', function(){
    // initiate datagraph image download from browser
    exportSVGAsImage();
  });


  document.getElementById('capture-lift-data-button').addEventListener('click', function(){
    console.log('Capture Lift Data');
    let formData = new FormData(document.forms.lift_data_form);
    xhr.open('POST', '/api/saveliftdata');
    xhr.send(formData)
    xhr.onload = function() {
      if (xhr.status === 200) {
        console.log('Lift data saved');
        // update datagraph
      }

    };
  });
  

  document.getElementById('STATUS_MESSAGE').addEventListener('dblclick', function(){
    document.getElementById('calibrationModal').style.display='block';
  });

  document.getElementById('file-manager-button').addEventListener('click', function(){
    document.getElementById('fileModal').style.display='block';
  });

  document.getElementById('info-button').addEventListener('click', function(){
    document.getElementById('infoModal').style.display='block';
  });

  document.getElementById('update-button').addEventListener('click', function(){
    document.getElementById('updateModal').style.display='block';
  });

  // Pressure tile
  document.getElementById('tile-pref-title').addEventListener('click', function(){
    document.getElementById('tile-pref').style.display='none';
    document.getElementById('tile-pdiff').style.display='block';
    setCookie("pressure-tile","pdiff","365")    
  });

  document.getElementById('tile-pdiff-title').addEventListener('click', function(){
    document.getElementById('tile-pdiff').style.display='none';
    document.getElementById('tile-pref').style.display='block';
    setCookie("pressure-tile","pref","365")
  });

  // flow tile
  document.getElementById('flow-tile-title').addEventListener('click', function(){
    document.getElementById('flow-tile').style.display='none';
    document.getElementById('aflow-tile').style.display='block';
    setCookie("flow-tile","aflow","365")    
  });

  document.getElementById('aflow-tile-title').addEventListener('click', function(){
    document.getElementById('aflow-tile').style.display='none';
    document.getElementById('sflow-tile').style.display='block';
    setCookie("flow-tile","sflow","365")    
  });

  document.getElementById('sflow-tile-title').addEventListener('click', function(){
    document.getElementById('sflow-tile').style.display='none';
    document.getElementById('maf-tile').style.display='block';
    setCookie("flow-tile","maf","365")    
  });

  document.getElementById('maf-tile-title').addEventListener('click', function(){
    document.getElementById('maf-tile').style.display='none';
    document.getElementById('flow-tile').style.display='block';
    setCookie("flow-tile","flow","365")    
  });

  // Tool tile
  document.getElementById('tile-pitot-title').addEventListener('click', function(){
    document.getElementById('tile-pitot').style.display='none';
    document.getElementById('tile-swirl').style.display='block';
    setCookie("tool-tile","swirl","365")    
  });

  document.getElementById('tile-swirl-title').addEventListener('click', function(){
    document.getElementById('tile-swirl').style.display='none';
    document.getElementById('tile-fdiff').style.display='block';
    setCookie("tool-tile","fdiff","365")    
  });

  document.getElementById('tile-fdiff-title').addEventListener('click', function(){
    document.getElementById('tile-fdiff').style.display='none';
    document.getElementById('tile-pitot').style.display='block';
    setCookie("tool-tile","pitot","365")    
  });


  document.getElementById('FDIFFTYPEDESC').addEventListener('click', function(){
    console.log('Toggle Flow Diff');
    xhr.open('GET', '/api/fdiff/toggle');
    // xhr.onload = function() {
    //   if (xhr.status === 200) window.location.href = '/';
    // };
    xhr.send();
  });

  document.getElementById('PDIFF').addEventListener('click', function(){
    console.log('Zero pDiff Value');
    xhr.open('GET', '/api/pdiff/zero');
    // xhr.onload = function() {
    //   if (xhr.status === 200) window.location.href = '/';
    // };
    xhr.send();
  });

  
  document.getElementById('PITOT').addEventListener('click', function(){
    console.log('Zero Pitot Value');
    xhr.open('GET', '/api/pitot/zero');
    // xhr.onload = function() {
    //   if (xhr.status === 200) window.location.href = '/';
    // };
    xhr.send();
  });



  document.getElementById('on-button').addEventListener('click', function(){
    console.log('Bench On');
    xhr.open('GET', '/api/bench/on');
    // xhr.onload = function() {
    //   if (xhr.status === 200) window.location.href = '/';
    // };
    xhr.send();
  });

  document.getElementById('off-button').addEventListener('click', function(){
    console.log('Bench Off');
    xhr.open('GET', '/api/bench/off');
    // xhr.onload = function() {
    //   if (xhr.status === 200) window.location.href = '/';
    // };
    xhr.send();
  });

  document.getElementById('calibrate-button').addEventListener('click', function(){
    console.log('Calibrate FLow Offset');
    xhr.open('GET', '/api/bench/calibrate');
    xhr.onload = function() {
      if (xhr.status === 200) window.location.href = '/?view=config';
    };
    xhr.send();
  });

  document.getElementById('leak-cal-button').addEventListener('click', function(){
    console.log('Leak Test Calibration');
    xhr.open('GET', '/api/bench/leakcal');
    xhr.onload = function() {
      if (xhr.status === 200) window.location.href = '/?view=config';
    };
    xhr.send();
  });

  document.getElementById('clear-message-button').addEventListener('click', function(){
    console.log('Clear Message');
    xhr.open('GET', '/api/clear-message');
    xhr.onload = function() {
      if (xhr.status === 200) window.location.href = '/';
    };
    xhr.send();
  });

  document.getElementById('restart-button').addEventListener('click', function(){
    console.log('System Reboot');
    xhr.open('GET', '/api/bench/reboot');
    xhr.onload = function() {
      if (xhr.status === 200) window.location.href = '/';
    };
    xhr.send();
  });



}


/***********************************************************
* Update selected orifice when orifice-radio button change
***/
function orificeChange(src) {
  
  var xhr = new XMLHttpRequest();

  console.log('Orifice ' + src.value + ' Selected');

  xhr.open('GET', '/api/orifice-change?orifice=' + src.value);
  xhr.onload = function() {
//    if (xhr.status === 200) window.location.href = '/';
  };
  xhr.send();
  }




/***********************************************************
* Page tab control
***/
function openTab(tabName, elmnt) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  document.getElementById(tabName).style.display = "block";
  // Pause SSE update when on data tab
  if (tabName === "datalog") {
    updateSSE = false;
  } else {
    updateSSE = true;
  }
}

/***********************************************************
* Close update modal dialog
***/
closeUpdateModalButton.onclick = function() {
  updateModal.style.display = "none";
}

/***********************************************************
* Close calibration modal dialog
***/
closeCalibrationModalButton.onclick = function() {
  calibrationModal.style.display = "none";
}

/***********************************************************
* Close file modal dialog
***/
closeFileModalButton.onclick = function() {
  fileModal.style.display = "none";
}

/***********************************************************
* Close info modal dialog
***/
closeInfoModalButton.onclick = function() {
  infoModal.style.display = "none";
}

/***********************************************************
* Close data modal dialog
***/
closeDataModalButton.onclick = function() {
  dataModal.style.display = "none";
}


/***********************************************************
* Close Capture Data modal dialog
***/
closeCaptureLiftDataModalButton.onclick = function() {
  captureLiftDataModal.style.display = "none";
}


/***********************************************************
* Close Load Data modal dialog
***/
closeLoadGraphDataModalButton.onclick = function() {
  loadGraphDataModal.style.display = "none";
}


/***********************************************************
* Close Save Data modal dialog
***/
closeSaveGraphDataModalButton.onclick = function() {
  saveGraphDataModal.style.display = "none";
}

/***********************************************************
* Close Flow Target Data modal dialog
***/
closeFlowTargetModalButton.onclick = function() {
  flowTargetModal.style.display = "none";
}



/***********************************************************
* Close modal dialogs on lose focus
***/
window.onclick = function(event) {
  if (event.target == fileModal || event.target == dataModal || event.target == serialModal || event.target == infoModal || event.target == captureLiftDataModal || event.target == loadGraphDataModal || event.target == saveGraphDataModal || event.target == calibrationModal || event.target == updateModal || event.target == flowTargetModal  ){
    fileModal.style.display = "none";
    infoModal.style.display = "none";
    captureLiftDataModal.style.display = "none";
    loadGraphDataModal.style.display = "none";
    saveGraphDataModal.style.display = "none";
    calibrationModal.style.display = "none";
    dataModal.style.display = "none";
    serialModal.style.display = "none";
    updateModal.style.display = "none";
    flowTargetModal.style.display = "none";
  }
}


/***********************************************************
* Close modal dialogs on esc button
***/
document.addEventListener("keydown", ({key}) => {
  if (key === "Escape") {
    fileModal.style.display = "none";
    infoModal.style.display = "none";
    captureLiftDataModal.style.display = "none";
    loadGraphDataModal.style.display = "none";
    saveGraphDataModal.style.display = "none";
    calibrationModal.style.display = "none";
    dataModal.style.display = "none";
    serialModal.style.display = "none";
    updateModal.style.display = "none";
    flowTargetModal.style.display = "none";
  }
})



/***********************************************************
* Export Data Graph as PNG Image (temp change to jpg)
* Source: https://takuti.me/note/javascript-save-svg-as-image/
***/
function exportSVGAsImage() {

  const svg = document.querySelector('svg');

  const data = (new XMLSerializer()).serializeToString(svg);
  const svgBlob = new Blob([data], {
      type: 'image/svg+xml;charset=utf-8'
  });

  // convert the blob object to a dedicated URL
  const url = URL.createObjectURL(svgBlob);

  // load the SVG blob to a fresh image object
  const img = new Image();
  img.addEventListener('load', () => {
    
    // draw the image on an ad-hoc canvas
    const bbox = svg.getBBox();

    const canvas = document.createElement('canvas');
    canvas.width = 800;
    canvas.height = 750;

    const context = canvas.getContext('2d');
    context.clearRect(0, 0, canvas.width, canvas.height);
    context.drawImage(img, 0, 0, canvas.width, canvas.height);

    URL.revokeObjectURL(url);

    // trigger a synthetic download operation with a temporary link
    const a = document.createElement('a');
    document.body.appendChild(a);
    a.download = 'LiftGraph.png';
    // a.href = canvas.toDataURL('image/jpeg');
    a.href = canvas.toDataURL();
    a.click();
    a.remove();

  });
  img.src = url;

}


// three cookies to remamber state of top three tiles - pressure / flow / tools

// http://www.quirksmode.org/js/cookies.html
// setCookie('ppkcookie','testcookie',7);

// var x = getCookie('ppkcookie');
// if (x) {
//     [do something with x]
// }
function setCookie(name,value,days) {
  var expires = "";
  if (days) {
      var date = new Date();
      date.setTime(date.getTime() + (days*24*60*60*1000));
      expires = "; expires=" + date.toUTCString();
  }
  document.cookie = name + "=" + (value || "")  + expires + "; path=/";
}


function getCookie(name) {
  var nameEQ = name + "=";
  var ca = document.cookie.split(';');
  for(var i=0;i < ca.length;i++) {
      var c = ca[i];
      while (c.charAt(0)==' ') c = c.substring(1,c.length);
      if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
  }
  return null;
}

// https://github.com/Autodrop3d/serialTerminal.com
function changeCookieValue(cookieName, newValue) {
  document.cookie = 
      `${cookieName}=${newValue}; 
          expires=Thu, 5 March 2030 12:00:00 UTC; path=/`;
}

// Serial monitor modal
// https://developer.chrome.com/docs/capabilities/serial
// var port, textEncoder, writableStreamClosed, writer;
// async function connectSerial() {


//     try {
      
//         // Prompt user to select any serial port.
//         const port = await navigator.serial.requestPort();
//         // const port = await navigator.serial.getPort()
//         await port.open({ baudRate: 115200 });

//         textEncoder = new TextEncoderStream();
//         writableStreamClosed = textEncoder.readable.pipeTo(port.writable);

//         writer = textEncoder.writable.getWriter();
//         listenToPort();
//     } catch {
//         alert("Serial Connection Failed");
//     }
// }
// async function sendCharacterNumber() {
//     document.getElementById("lineToSend").value = String.fromCharCode(document.getElementById("lineToSend").value);
// }
// async function sendSerialLine() {
//     dataToSend = document.getElementById("lineToSend").value;
//     if (document.getElementById("addLine").checked == true) dataToSend = dataToSend + "\r\n";
//     if (document.getElementById("echoOn").checked == true) appendToTerminal("> " + dataToSend);
//     await writer.write(dataToSend);
// }
// async function listenToPort() {
//     const textDecoder = new TextDecoderStream();
//     const readableStreamClosed = port.readable.pipeTo(textDecoder.writable);
//     const reader = textDecoder.readable.getReader();
//     // Listen to data coming from the serial device.
//     while (true) {
//         const { value, done } = await reader.read();
//         if (done) {
//             // Allow the serial port to be closed later.
//             reader.releaseLock();
//             break;
//         }
//         // value is a string.
//         appendToTerminal(value);
//     }
// }
// const serialResultsDiv = document.getElementById("serialResults");
// async function appendToTerminal(newStuff) {
//     serialResultsDiv.innerHTML += newStuff;
//     if (serialResultsDiv.innerHTML.length > 3000) serialResultsDiv.innerHTML = serialResultsDiv.innerHTML.slice(serialResultsDiv.innerHTML.length - 3000);

//     //scroll down to bottom of div
//     serialResultsDiv.scrollTop = serialResultsDiv.scrollHeight;
// }
// document.getElementById("lineToSend").addEventListener("keyup", async function (event) {
//     if (event.keyCode === 13) {
//         sendSerialLine();
//     }
// })
// document.getElementById("baud").value = (localStorage.baud == undefined ? 115200 : localStorage.baud);
// document.getElementById("addLine").checked = (localStorage.addLine == "false" ? false : true);
// document.getElementById("echoOn").checked = (localStorage.echoOn == "false" ? false : true);


// // CODELAB: Add feature detection here.
// const notSupported = document.getElementById('notSupported');
// notSupported.classList.toggle('hidden', 'serial' in navigator);</script></body></html>